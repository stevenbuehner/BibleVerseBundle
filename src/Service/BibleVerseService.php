<?php

/**
 * Copyright 2012 Steven Buehner, Liebenzeller Mission
 * www.liebenzell.org
 *
 * Thank you to
 * - Klemens Kolb (Bibleverses)
 * - Benjamin Binder (Bibleverses)
 **/

namespace StevenBuehner\BibleVerseBundle\Service;

use StevenBuehner\BibleVerseBundle\Entity\BibleVerse;
use StevenBuehner\BibleVerseBundle\Exceptions\InvalidBibleVerseObjectException;
use StevenBuehner\BibleVerseBundle\Exceptions\InvalidBibleVerseRangeException;
use StevenBuehner\BibleVerseBundle\Exceptions\InvalidBookIdException;
use StevenBuehner\BibleVerseBundle\Interfaces\BibleVerseInterface;

/**
 * Class BibleVerseService
 *
 * @package StevenBuehner\BibleVerseBundle\Service
 * FIXME: Handling of FromBookId and ToBookId is not implemented yet
 */
class BibleVerseService {
	private $bibleData              = NULL;
	private $lastInvalidBibleverses = array();
	private $firstSearchString      = NULL;
	private $lastRestString         = NULL;

	// Statistical Values
	private $statLongest  = 0;
	private $statShortest = 0;
	private $statSum      = 0;
	private $statCount    = 0;
	private $startTime    = 0;

	public function __construct() {
		$this->initBibleData();
	}

	private function initBibleData() {
		$bd = &$this->bibleData;

		$_first  = '(1[.]?\s?|(1st|First|I[.]?)\s)';
		$_second = '(2[.]?\s?|(2snd|Second|II[.]?)\s)';
		$_third  = '(3[.]?\s?|(3rd|Third|III[.]?)\s)';

		$bd [1] ["desc"] ["de"] ["long"]  = "1. Mose";
		$bd [1] ["desc"] ["de"] ["short"] = "1Mo";
		$bd [1] ["desc"] ["en"] ["long"]  = "Genesis";
		$bd [1] ["desc"] ["en"] ["short"] = "Gen";
		$bd [1] ["pat"]                   = "/^(1[.]?\s?(mos?|mose)|Genesis|Gen?|Gn)$/i";
		$bd [1] ["kapAnz"]                = 50;
		$bd [1] [1]                       = 31;
		$bd [1] [2]                       = 25;
		$bd [1] [3]                       = 24;
		$bd [1] [4]                       = 26;
		$bd [1] [5]                       = 32;
		$bd [1] [6]                       = 22;
		$bd [1] [7]                       = 24;
		$bd [1] [8]                       = 22;
		$bd [1] [9]                       = 29;
		$bd [1] [10]                      = 32;
		$bd [1] [11]                      = 32;
		$bd [1] [12]                      = 20;
		$bd [1] [13]                      = 18;
		$bd [1] [14]                      = 24;
		$bd [1] [15]                      = 21;
		$bd [1] [16]                      = 16;
		$bd [1] [17]                      = 27;
		$bd [1] [18]                      = 33;
		$bd [1] [19]                      = 38;
		$bd [1] [20]                      = 18;
		$bd [1] [21]                      = 34;
		$bd [1] [22]                      = 24;
		$bd [1] [23]                      = 20;
		$bd [1] [24]                      = 67;
		$bd [1] [25]                      = 34;
		$bd [1] [26]                      = 35;
		$bd [1] [27]                      = 46;
		$bd [1] [28]                      = 22;
		$bd [1] [29]                      = 35;
		$bd [1] [30]                      = 43;
		$bd [1] [31]                      = 54;
		$bd [1] [32]                      = 33;
		$bd [1] [33]                      = 20;
		$bd [1] [34]                      = 31;
		$bd [1] [35]                      = 29;
		$bd [1] [36]                      = 43;
		$bd [1] [37]                      = 36;
		$bd [1] [38]                      = 30;
		$bd [1] [39]                      = 23;
		$bd [1] [40]                      = 23;
		$bd [1] [41]                      = 57;
		$bd [1] [42]                      = 38;
		$bd [1] [43]                      = 34;
		$bd [1] [44]                      = 34;
		$bd [1] [45]                      = 28;
		$bd [1] [46]                      = 34;
		$bd [1] [47]                      = 31;
		$bd [1] [48]                      = 22;
		$bd [1] [49]                      = 33;
		$bd [1] [50]                      = 26;

		$bd [2] ["desc"] ["de"] ["long"]  = "2. Mose";
		$bd [2] ["desc"] ["de"] ["short"] = "2Mo";
		$bd [2] ["desc"] ["en"] ["long"]  = "Exodus";
		$bd [2] ["desc"] ["en"] ["short"] = "Exod";
		$bd [2] ["pat"]                   = "/^(2[.]?\s?(mos?|mose)|Exod(us)?|Exo?)$/i";
		$bd [2] ["kapAnz"]                = 40;
		$bd [2] [1]                       = 22;
		$bd [2] [2]                       = 25;
		$bd [2] [3]                       = 22;
		$bd [2] [4]                       = 31;
		$bd [2] [5]                       = 23;
		$bd [2] [6]                       = 30;
		$bd [2] [7]                       = 29;
		$bd [2] [8]                       = 28;
		$bd [2] [9]                       = 35;
		$bd [2] [10]                      = 29;
		$bd [2] [11]                      = 10;
		$bd [2] [12]                      = 51;
		$bd [2] [13]                      = 22;
		$bd [2] [14]                      = 31;
		$bd [2] [15]                      = 27;
		$bd [2] [16]                      = 36;
		$bd [2] [17]                      = 16;
		$bd [2] [18]                      = 27;
		$bd [2] [19]                      = 25;
		$bd [2] [20]                      = 26;
		$bd [2] [21]                      = 37;
		$bd [2] [22]                      = 30;
		$bd [2] [23]                      = 33;
		$bd [2] [24]                      = 18;
		$bd [2] [25]                      = 40;
		$bd [2] [26]                      = 37;
		$bd [2] [27]                      = 21;
		$bd [2] [28]                      = 43;
		$bd [2] [29]                      = 46;
		$bd [2] [30]                      = 38;
		$bd [2] [31]                      = 18;
		$bd [2] [32]                      = 35;
		$bd [2] [33]                      = 23;
		$bd [2] [34]                      = 35;
		$bd [2] [35]                      = 35;
		$bd [2] [36]                      = 38;
		$bd [2] [37]                      = 29;
		$bd [2] [38]                      = 31;
		$bd [2] [39]                      = 43;
		$bd [2] [40]                      = 38;

		$bd [3] ["desc"] ["de"] ["long"]  = "3. Mose";
		$bd [3] ["desc"] ["de"] ["short"] = "3Mo";
		$bd [3] ["desc"] ["en"] ["long"]  = "Leviticus";
		$bd [3] ["desc"] ["en"] ["short"] = "Lev";
		$bd [3] ["pat"]                   = "/^(3[.]?\s?(mos?|mose)|Leviti[ck]us|Lev?|Lv)$/i";
		$bd [3] ["kapAnz"]                = 27;
		$bd [3] [1]                       = 17;
		$bd [3] [2]                       = 16;
		$bd [3] [3]                       = 17;
		$bd [3] [4]                       = 35;
		$bd [3] [5]                       = 26;
		$bd [3] [6]                       = 23;
		$bd [3] [7]                       = 38;
		$bd [3] [8]                       = 36;
		$bd [3] [9]                       = 24;
		$bd [3] [10]                      = 20;
		$bd [3] [11]                      = 47;
		$bd [3] [12]                      = 8;
		$bd [3] [13]                      = 59;
		$bd [3] [14]                      = 57;
		$bd [3] [15]                      = 33;
		$bd [3] [16]                      = 34;
		$bd [3] [17]                      = 16;
		$bd [3] [18]                      = 30;
		$bd [3] [19]                      = 37;
		$bd [3] [20]                      = 27;
		$bd [3] [21]                      = 24;
		$bd [3] [22]                      = 33;
		$bd [3] [23]                      = 44;
		$bd [3] [24]                      = 23;
		$bd [3] [25]                      = 55;
		$bd [3] [26]                      = 46;
		$bd [3] [27]                      = 34;

		$bd [4] ["desc"] ["de"] ["long"]  = "4. Mose";
		$bd [4] ["desc"] ["de"] ["short"] = "4Mo";
		$bd [4] ["desc"] ["en"] ["long"]  = "Numbers";
		$bd [4] ["desc"] ["en"] ["short"] = "Num";
		$bd [4] ["pat"]                   = "/^(4[.]?\s?(mos?|mose)|Numeri|Num?|N[mb]|Numbers)$/i";
		$bd [4] ["kapAnz"]                = 36;
		$bd [4] [1]                       = 54;
		$bd [4] [2]                       = 34;
		$bd [4] [3]                       = 51;
		$bd [4] [4]                       = 49;
		$bd [4] [5]                       = 31;
		$bd [4] [6]                       = 27;
		$bd [4] [7]                       = 89;
		$bd [4] [8]                       = 26;
		$bd [4] [9]                       = 23;
		$bd [4] [10]                      = 36;
		$bd [4] [11]                      = 35;
		$bd [4] [12]                      = 16;
		$bd [4] [13]                      = 33;
		$bd [4] [14]                      = 45;
		$bd [4] [15]                      = 41;
		$bd [4] [16]                      = 35;
		$bd [4] [17]                      = 28;
		$bd [4] [18]                      = 32;
		$bd [4] [19]                      = 22;
		$bd [4] [20]                      = 29;
		$bd [4] [21]                      = 35;
		$bd [4] [22]                      = 41;
		$bd [4] [23]                      = 30;
		$bd [4] [24]                      = 25;
		$bd [4] [25]                      = 18;
		$bd [4] [26]                      = 65;
		$bd [4] [27]                      = 23;
		$bd [4] [28]                      = 31;
		$bd [4] [29]                      = 40;
		$bd [4] [30]                      = 16;
		$bd [4] [31]                      = 54;
		$bd [4] [32]                      = 42;
		$bd [4] [33]                      = 56;
		$bd [4] [34]                      = 29;
		$bd [4] [35]                      = 34;
		$bd [4] [36]                      = 13;

		$bd [5] ["desc"] ["de"] ["long"]  = "5. Mose";
		$bd [5] ["desc"] ["de"] ["short"] = "5Mo";
		$bd [5] ["desc"] ["en"] ["long"]  = "Deuteronomy";
		$bd [5] ["desc"] ["en"] ["short"] = "Deut";
		$bd [5] ["pat"]                   = "/^(5[.]?\s?(mos?|mose)|Deuteronom(y|ium)|Deut|Dtn?)$/i";
		$bd [5] ["kapAnz"]                = 34;
		$bd [5] [1]                       = 46;
		$bd [5] [2]                       = 37;
		$bd [5] [3]                       = 29;
		$bd [5] [4]                       = 49;
		$bd [5] [5]                       = 33;
		$bd [5] [6]                       = 25;
		$bd [5] [7]                       = 26;
		$bd [5] [8]                       = 20;
		$bd [5] [9]                       = 29;
		$bd [5] [10]                      = 22;
		$bd [5] [11]                      = 32;
		$bd [5] [12]                      = 32;
		$bd [5] [13]                      = 18;
		$bd [5] [14]                      = 29;
		$bd [5] [15]                      = 23;
		$bd [5] [16]                      = 22;
		$bd [5] [17]                      = 20;
		$bd [5] [18]                      = 22;
		$bd [5] [19]                      = 21;
		$bd [5] [20]                      = 20;
		$bd [5] [21]                      = 23;
		$bd [5] [22]                      = 30;
		$bd [5] [23]                      = 25;
		$bd [5] [24]                      = 22;
		$bd [5] [25]                      = 19;
		$bd [5] [26]                      = 19;
		$bd [5] [27]                      = 26;
		$bd [5] [28]                      = 68;
		$bd [5] [29]                      = 29;
		$bd [5] [30]                      = 20;
		$bd [5] [31]                      = 30;
		$bd [5] [32]                      = 52;
		$bd [5] [33]                      = 29;
		$bd [5] [34]                      = 12;

		$bd [6] ["desc"] ["de"] ["long"]  = "Josua";
		$bd [6] ["desc"] ["de"] ["short"] = "Jos";
		$bd [6] ["desc"] ["en"] ["long"]  = "Joshua";
		$bd [6] ["desc"] ["en"] ["short"] = "Josh";
		$bd [6] ["pat"]                   = "/^(Jo[sz]h?|Jo[sz]h?u[ae]|Jsh?)$/i";
		$bd [6] ["kapAnz"]                = 24;
		$bd [6] [1]                       = 18;
		$bd [6] [2]                       = 24;
		$bd [6] [3]                       = 17;
		$bd [6] [4]                       = 24;
		$bd [6] [5]                       = 15;
		$bd [6] [6]                       = 27;
		$bd [6] [7]                       = 26;
		$bd [6] [8]                       = 35;
		$bd [6] [9]                       = 27;
		$bd [6] [10]                      = 43;
		$bd [6] [11]                      = 23;
		$bd [6] [12]                      = 24;
		$bd [6] [13]                      = 33;
		$bd [6] [14]                      = 15;
		$bd [6] [15]                      = 63;
		$bd [6] [16]                      = 10;
		$bd [6] [17]                      = 18;
		$bd [6] [18]                      = 28;
		$bd [6] [19]                      = 51;
		$bd [6] [20]                      = 9;
		$bd [6] [21]                      = 45;
		$bd [6] [22]                      = 34;
		$bd [6] [23]                      = 16;
		$bd [6] [24]                      = 33;

		$bd [7] ["desc"] ["de"] ["long"]  = "Richter";
		$bd [7] ["desc"] ["de"] ["short"] = "Ri";
		$bd [7] ["desc"] ["en"] ["long"]  = "Judges";
		$bd [7] ["desc"] ["en"] ["short"] = "Judg";
		$bd [7] ["pat"]                   = "/^(Ri(chter)?|Judges|Judg|jd?g|jdgs|jdc|judicum)$/i";
		$bd [7] ["kapAnz"]                = 21;
		$bd [7] [1]                       = 36;
		$bd [7] [2]                       = 23;
		$bd [7] [3]                       = 31;
		$bd [7] [4]                       = 24;
		$bd [7] [5]                       = 31;
		$bd [7] [6]                       = 40;
		$bd [7] [7]                       = 25;
		$bd [7] [8]                       = 35;
		$bd [7] [9]                       = 57;
		$bd [7] [10]                      = 18;
		$bd [7] [11]                      = 40;
		$bd [7] [12]                      = 15;
		$bd [7] [13]                      = 25;
		$bd [7] [14]                      = 20;
		$bd [7] [15]                      = 20;
		$bd [7] [16]                      = 31;
		$bd [7] [17]                      = 13;
		$bd [7] [18]                      = 31;
		$bd [7] [19]                      = 30;
		$bd [7] [20]                      = 48;
		$bd [7] [21]                      = 25;

		$bd [8] ["desc"] ["de"] ["long"]  = "Rut";
		$bd [8] ["desc"] ["de"] ["short"] = "Rut";
		$bd [8] ["desc"] ["en"] ["long"]  = "Ruth";
		$bd [8] ["desc"] ["en"] ["short"] = "Ruth";
		$bd [8] ["pat"]                   = "/^((Buch )?Ruth?|rth?|Ru)$/i";
		$bd [8] ["kapAnz"]                = 4;
		$bd [8] [1]                       = 22;
		$bd [8] [2]                       = 23;
		$bd [8] [3]                       = 18;
		$bd [8] [4]                       = 22;

		$bd [9] ["desc"] ["de"] ["long"]  = "1. Samuel";
		$bd [9] ["desc"] ["de"] ["short"] = "1Sam";
		$bd [9] ["desc"] ["en"] ["long"]  = "1 Samuel";
		$bd [9] ["desc"] ["en"] ["short"] = "1Sam";
		$bd [9] ["pat"]                   = "/^{$_first}(Sam?|Samuel|Sm)$/i";
		$bd [9] ["kapAnz"]                = 31;
		$bd [9] [1]                       = 28;
		$bd [9] [2]                       = 36;
		$bd [9] [3]                       = 21;
		$bd [9] [4]                       = 22;
		$bd [9] [5]                       = 12;
		$bd [9] [6]                       = 21;
		$bd [9] [7]                       = 17;
		$bd [9] [8]                       = 22;
		$bd [9] [9]                       = 27;
		$bd [9] [10]                      = 27;
		$bd [9] [11]                      = 15;
		$bd [9] [12]                      = 25;
		$bd [9] [13]                      = 23;
		$bd [9] [14]                      = 52;
		$bd [9] [15]                      = 35;
		$bd [9] [16]                      = 23;
		$bd [9] [17]                      = 58;
		$bd [9] [18]                      = 30;
		$bd [9] [19]                      = 24;
		$bd [9] [20]                      = 42;
		$bd [9] [21]                      = 15;
		$bd [9] [22]                      = 23;
		$bd [9] [23]                      = 29;
		$bd [9] [24]                      = 22;
		$bd [9] [25]                      = 44;
		$bd [9] [26]                      = 25;
		$bd [9] [27]                      = 12;
		$bd [9] [28]                      = 25;
		$bd [9] [29]                      = 11;
		$bd [9] [30]                      = 31;
		$bd [9] [31]                      = 13;

		$bd [10] ["desc"] ["de"] ["long"]  = "2. Samuel";
		$bd [10] ["desc"] ["de"] ["short"] = "2Sam";
		$bd [10] ["desc"] ["en"] ["long"]  = "2 Samuel";
		$bd [10] ["desc"] ["en"] ["short"] = "2Sam";
		$bd [10] ["pat"]                   = "/^{$_second}(Sam?|Samuel|Sm)$/i";
		$bd [10] ["kapAnz"]                = 24;
		$bd [10] [1]                       = 27;
		$bd [10] [2]                       = 32;
		$bd [10] [3]                       = 39;
		$bd [10] [4]                       = 12;
		$bd [10] [5]                       = 25;
		$bd [10] [6]                       = 23;
		$bd [10] [7]                       = 29;
		$bd [10] [8]                       = 18;
		$bd [10] [9]                       = 13;
		$bd [10] [10]                      = 19;
		$bd [10] [11]                      = 27;
		$bd [10] [12]                      = 31;
		$bd [10] [13]                      = 39;
		$bd [10] [14]                      = 33;
		$bd [10] [15]                      = 37;
		$bd [10] [16]                      = 23;
		$bd [10] [17]                      = 29;
		$bd [10] [18]                      = 33;
		$bd [10] [19]                      = 43;
		$bd [10] [20]                      = 26;
		$bd [10] [21]                      = 22;
		$bd [10] [22]                      = 51;
		$bd [10] [23]                      = 39;
		$bd [10] [24]                      = 25;

		$bd [11] ["desc"] ["de"] ["long"]  = "1. Könige";
		$bd [11] ["desc"] ["de"] ["short"] = "1Kön";
		$bd [11] ["desc"] ["en"] ["long"]  = "1 Kings";
		$bd [11] ["desc"] ["en"] ["short"] = "1Kgs";
		$bd [11] ["pat"]                   = "/^({$_first}(K(ö|oe|ö)(n|nige)?|Koningen|reg|King[s]?|Kgs|Ki))$/i";
		$bd [11] ["kapAnz"]                = 22;
		$bd [11] [1]                       = 53;
		$bd [11] [2]                       = 46;
		$bd [11] [3]                       = 28;
		$bd [11] [4]                       = 34;
		$bd [11] [5]                       = 18;
		$bd [11] [6]                       = 38;
		$bd [11] [7]                       = 51;
		$bd [11] [8]                       = 66;
		$bd [11] [9]                       = 28;
		$bd [11] [10]                      = 29;
		$bd [11] [11]                      = 43;
		$bd [11] [12]                      = 33;
		$bd [11] [13]                      = 34;
		$bd [11] [14]                      = 31;
		$bd [11] [15]                      = 34;
		$bd [11] [16]                      = 34;
		$bd [11] [17]                      = 24;
		$bd [11] [18]                      = 46;
		$bd [11] [19]                      = 21;
		$bd [11] [20]                      = 43;
		$bd [11] [21]                      = 29;
		$bd [11] [22]                      = 53;

		$bd [12] ["desc"] ["de"] ["long"]  = "2. Könige";
		$bd [12] ["desc"] ["de"] ["short"] = "2Kön";
		$bd [12] ["desc"] ["en"] ["long"]  = "2 Kings";
		$bd [12] ["desc"] ["en"] ["short"] = "2Kgs";
		$bd [12] ["pat"]                   = "/^({$_second}(K(ö|oe|ö)(n|nige)?|Koningen|reg|King[s]?|Kgs|Ki))$/i";
		$bd [12] ["kapAnz"]                = 25;
		$bd [12] [1]                       = 18;
		$bd [12] [2]                       = 25;
		$bd [12] [3]                       = 27;
		$bd [12] [4]                       = 44;
		$bd [12] [5]                       = 27;
		$bd [12] [6]                       = 33;
		$bd [12] [7]                       = 20;
		$bd [12] [8]                       = 29;
		$bd [12] [9]                       = 37;
		$bd [12] [10]                      = 36;
		$bd [12] [11]                      = 21;
		$bd [12] [12]                      = 21;
		$bd [12] [13]                      = 25;
		$bd [12] [14]                      = 29;
		$bd [12] [15]                      = 38;
		$bd [12] [16]                      = 20;
		$bd [12] [17]                      = 41;
		$bd [12] [18]                      = 37;
		$bd [12] [19]                      = 37;
		$bd [12] [20]                      = 21;
		$bd [12] [21]                      = 26;
		$bd [12] [22]                      = 20;
		$bd [12] [23]                      = 37;
		$bd [12] [24]                      = 20;
		$bd [12] [25]                      = 30;

		$bd [13] ["desc"] ["de"] ["long"]  = "1. Chronik";
		$bd [13] ["desc"] ["de"] ["short"] = "1Chr";
		$bd [13] ["desc"] ["en"] ["long"]  = "1 Chronicles";
		$bd [13] ["desc"] ["en"] ["short"] = "1Chr";
		$bd [13] ["pat"]                   = "/^({$_first}(Chr?|Chro|Chron|Chronik[e]?|Chronicles)[.]?)$/i";
		$bd [13] ["kapAnz"]                = 29;
		$bd [13] [1]                       = 54;
		$bd [13] [2]                       = 55;
		$bd [13] [3]                       = 24;
		$bd [13] [4]                       = 43;
		$bd [13] [5]                       = 26;
		$bd [13] [6]                       = 81;
		$bd [13] [7]                       = 40;
		$bd [13] [8]                       = 40;
		$bd [13] [9]                       = 44;
		$bd [13] [10]                      = 14;
		$bd [13] [11]                      = 47;
		$bd [13] [12]                      = 40;
		$bd [13] [13]                      = 14;
		$bd [13] [14]                      = 17;
		$bd [13] [15]                      = 29;
		$bd [13] [16]                      = 43;
		$bd [13] [17]                      = 27;
		$bd [13] [18]                      = 17;
		$bd [13] [19]                      = 19;
		$bd [13] [20]                      = 8;
		$bd [13] [21]                      = 30;
		$bd [13] [22]                      = 19;
		$bd [13] [23]                      = 32;
		$bd [13] [24]                      = 31;
		$bd [13] [25]                      = 31;
		$bd [13] [26]                      = 32;
		$bd [13] [27]                      = 34;
		$bd [13] [28]                      = 21;
		$bd [13] [29]                      = 30;

		$bd [14] ["desc"] ["de"] ["long"]  = "2. Chronik";
		$bd [14] ["desc"] ["de"] ["short"] = "2Chr";
		$bd [14] ["desc"] ["en"] ["long"]  = "2 Chronicles";
		$bd [14] ["desc"] ["en"] ["short"] = "2Chr";
		$bd [14] ["pat"]                   = "/^({$_second}(Chr|Chro|Chron|Chronik[e]?|Chronicles)[.]?)$/i";
		$bd [14] ["kapAnz"]                = 36;
		$bd [14] [1]                       = 17;
		$bd [14] [2]                       = 18;
		$bd [14] [3]                       = 17;
		$bd [14] [4]                       = 22;
		$bd [14] [5]                       = 14;
		$bd [14] [6]                       = 42;
		$bd [14] [7]                       = 22;
		$bd [14] [8]                       = 18;
		$bd [14] [9]                       = 31;
		$bd [14] [10]                      = 19;
		$bd [14] [11]                      = 23;
		$bd [14] [12]                      = 16;
		$bd [14] [13]                      = 22;
		$bd [14] [14]                      = 15;
		$bd [14] [15]                      = 19;
		$bd [14] [16]                      = 14;
		$bd [14] [17]                      = 19;
		$bd [14] [18]                      = 34;
		$bd [14] [19]                      = 11;
		$bd [14] [20]                      = 37;
		$bd [14] [21]                      = 20;
		$bd [14] [22]                      = 12;
		$bd [14] [23]                      = 21;
		$bd [14] [24]                      = 27;
		$bd [14] [25]                      = 28;
		$bd [14] [26]                      = 23;
		$bd [14] [27]                      = 9;
		$bd [14] [28]                      = 27;
		$bd [14] [29]                      = 36;
		$bd [14] [30]                      = 27;
		$bd [14] [31]                      = 21;
		$bd [14] [32]                      = 33;
		$bd [14] [33]                      = 25;
		$bd [14] [34]                      = 33;
		$bd [14] [35]                      = 27;
		$bd [14] [36]                      = 23;

		// Die Abkürzung "Ez" wird zugunsten von Ezekiel hier nicht erkannt
		$bd [15] ["desc"] ["de"] ["long"]  = "Esra";
		$bd [15] ["desc"] ["de"] ["short"] = "Esra";
		$bd [15] ["desc"] ["en"] ["long"]  = "Ezra";
		$bd [15] ["desc"] ["en"] ["short"] = "Ezra";
		$bd [15] ["pat"]                   = "/^(E[sz]ra|Esr?|Ezr)$/i";
		$bd [15] ["kapAnz"]                = 10;
		$bd [15] [1]                       = 11;
		$bd [15] [2]                       = 70;
		$bd [15] [3]                       = 13;
		$bd [15] [4]                       = 24;
		$bd [15] [5]                       = 17;
		$bd [15] [6]                       = 22;
		$bd [15] [7]                       = 28;
		$bd [15] [8]                       = 36;
		$bd [15] [9]                       = 15;
		$bd [15] [10]                      = 44;

		$bd [16] ["desc"] ["de"] ["long"]  = "Nehemiah";
		$bd [16] ["desc"] ["de"] ["short"] = "Neh";
		$bd [16] ["desc"] ["en"] ["long"]  = "Nehemiah";
		$bd [16] ["desc"] ["en"] ["short"] = "Neh";
		$bd [16] ["pat"]                   = "/^(Neh?|Nehm|Nehemiah?)$/i";
		$bd [16] ["kapAnz"]                = 13;
		$bd [16] [1]                       = 11;
		$bd [16] [2]                       = 20;
		$bd [16] [3]                       = 32;
		$bd [16] [4]                       = 23;
		$bd [16] [5]                       = 19;
		$bd [16] [6]                       = 19;
		$bd [16] [7]                       = 73;
		$bd [16] [8]                       = 18;
		$bd [16] [9]                       = 38;
		$bd [16] [10]                      = 39;
		$bd [16] [11]                      = 36;
		$bd [16] [12]                      = 47;
		$bd [16] [13]                      = 31;

		$bd [17] ["desc"] ["de"] ["long"]  = "Ester";
		$bd [17] ["desc"] ["de"] ["short"] = "Est";
		$bd [17] ["desc"] ["en"] ["long"]  = "Esther";
		$bd [17] ["desc"] ["en"] ["short"] = "Esth";
		$bd [17] ["pat"]                   = "/^(Ester|Esther|Est|Esth)$/i";
		$bd [17] ["kapAnz"]                = 10;
		$bd [17] [1]                       = 22;
		$bd [17] [2]                       = 23;
		$bd [17] [3]                       = 15;
		$bd [17] [4]                       = 17;
		$bd [17] [5]                       = 14;
		$bd [17] [6]                       = 14;
		$bd [17] [7]                       = 10;
		$bd [17] [8]                       = 17;
		$bd [17] [9]                       = 32;
		$bd [17] [10]                      = 3;

		$bd [18] ["desc"] ["de"] ["long"]  = "Hiob";
		$bd [18] ["desc"] ["de"] ["short"] = "Hiob";
		$bd [18] ["desc"] ["en"] ["long"]  = "Job";
		$bd [18] ["desc"] ["en"] ["short"] = "Job";
		$bd [18] ["pat"]                   = "/^(Ijob|Hiob|Hi|Job|Jb)$/i";
		$bd [18] ["kapAnz"]                = 42;
		$bd [18] [1]                       = 22;
		$bd [18] [2]                       = 13;
		$bd [18] [3]                       = 26;
		$bd [18] [4]                       = 21;
		$bd [18] [5]                       = 27;
		$bd [18] [6]                       = 30;
		$bd [18] [7]                       = 21;
		$bd [18] [8]                       = 22;
		$bd [18] [9]                       = 35;
		$bd [18] [10]                      = 22;
		$bd [18] [11]                      = 20;
		$bd [18] [12]                      = 25;
		$bd [18] [13]                      = 28;
		$bd [18] [14]                      = 22;
		$bd [18] [15]                      = 35;
		$bd [18] [16]                      = 22;
		$bd [18] [17]                      = 16;
		$bd [18] [18]                      = 21;
		$bd [18] [19]                      = 29;
		$bd [18] [20]                      = 29;
		$bd [18] [21]                      = 34;
		$bd [18] [22]                      = 30;
		$bd [18] [23]                      = 17;
		$bd [18] [24]                      = 25;
		$bd [18] [25]                      = 6;
		$bd [18] [26]                      = 14;
		$bd [18] [27]                      = 23;
		$bd [18] [28]                      = 28;
		$bd [18] [29]                      = 25;
		$bd [18] [30]                      = 31;
		$bd [18] [31]                      = 40;
		$bd [18] [32]                      = 22;
		$bd [18] [33]                      = 33;
		$bd [18] [34]                      = 37;
		$bd [18] [35]                      = 16;
		$bd [18] [36]                      = 33;
		$bd [18] [37]                      = 24;
		$bd [18] [38]                      = 41;
		$bd [18] [39]                      = 30;
		$bd [18] [40]                      = 32;
		$bd [18] [41]                      = 26;
		$bd [18] [42]                      = 17;

		$bd [19] ["desc"] ["de"] ["long"]  = "Psalmen";
		$bd [19] ["desc"] ["de"] ["short"] = "Ps";
		$bd [19] ["desc"] ["en"] ["long"]  = "Psalms";
		$bd [19] ["desc"] ["en"] ["short"] = "Ps";
		$bd [19] ["pat"]                   = "/^(Psalms?|Psalmen|Ps|Psa|Psm|Pss|Psal|Pslm|Psalter)$/i";
		$bd [19] ["kapAnz"]                = 150;
		$bd [19] [1]                       = 6;
		$bd [19] [2]                       = 12;
		$bd [19] [3]                       = 9;
		$bd [19] [4]                       = 9;
		$bd [19] [5]                       = 13;
		$bd [19] [6]                       = 11;
		$bd [19] [7]                       = 18;
		$bd [19] [8]                       = 10;
		$bd [19] [9]                       = 21;
		$bd [19] [10]                      = 18;
		$bd [19] [11]                      = 7;
		$bd [19] [12]                      = 9;
		$bd [19] [13]                      = 6;
		$bd [19] [14]                      = 7;
		$bd [19] [15]                      = 5;
		$bd [19] [16]                      = 11;
		$bd [19] [17]                      = 15;
		$bd [19] [18]                      = 51;
		$bd [19] [19]                      = 15;
		$bd [19] [20]                      = 10;
		$bd [19] [21]                      = 14;
		$bd [19] [22]                      = 32;
		$bd [19] [23]                      = 6;
		$bd [19] [24]                      = 10;
		$bd [19] [25]                      = 22;
		$bd [19] [26]                      = 12;
		$bd [19] [27]                      = 14;
		$bd [19] [28]                      = 9;
		$bd [19] [29]                      = 11;
		$bd [19] [30]                      = 13;
		$bd [19] [31]                      = 25;
		$bd [19] [32]                      = 11;
		$bd [19] [33]                      = 22;
		$bd [19] [34]                      = 23;
		$bd [19] [35]                      = 28;
		$bd [19] [36]                      = 13;
		$bd [19] [37]                      = 40;
		$bd [19] [38]                      = 23;
		$bd [19] [39]                      = 14;
		$bd [19] [40]                      = 18;
		$bd [19] [41]                      = 14;
		$bd [19] [42]                      = 12;
		$bd [19] [43]                      = 5;
		$bd [19] [44]                      = 27;
		$bd [19] [45]                      = 18;
		$bd [19] [46]                      = 12;
		$bd [19] [47]                      = 10;
		$bd [19] [48]                      = 15;
		$bd [19] [49]                      = 21;
		$bd [19] [50]                      = 23;
		$bd [19] [51]                      = 21;
		$bd [19] [52]                      = 11;
		$bd [19] [53]                      = 7;
		$bd [19] [54]                      = 9;
		$bd [19] [55]                      = 24;
		$bd [19] [56]                      = 14;
		$bd [19] [57]                      = 12;
		$bd [19] [58]                      = 12;
		$bd [19] [59]                      = 18;
		$bd [19] [60]                      = 14;
		$bd [19] [61]                      = 9;
		$bd [19] [62]                      = 13;
		$bd [19] [63]                      = 12;
		$bd [19] [64]                      = 11;
		$bd [19] [65]                      = 14;
		$bd [19] [66]                      = 20;
		$bd [19] [67]                      = 8;
		$bd [19] [68]                      = 36;
		$bd [19] [69]                      = 37;
		$bd [19] [70]                      = 6;
		$bd [19] [71]                      = 24;
		$bd [19] [72]                      = 20;
		$bd [19] [73]                      = 28;
		$bd [19] [74]                      = 23;
		$bd [19] [75]                      = 11;
		$bd [19] [76]                      = 13;
		$bd [19] [77]                      = 21;
		$bd [19] [78]                      = 72;
		$bd [19] [79]                      = 13;
		$bd [19] [80]                      = 20;
		$bd [19] [81]                      = 17;
		$bd [19] [82]                      = 8;
		$bd [19] [83]                      = 19;
		$bd [19] [84]                      = 13;
		$bd [19] [85]                      = 14;
		$bd [19] [86]                      = 17;
		$bd [19] [87]                      = 7;
		$bd [19] [88]                      = 19;
		$bd [19] [89]                      = 53;
		$bd [19] [90]                      = 17;
		$bd [19] [91]                      = 16;
		$bd [19] [92]                      = 16;
		$bd [19] [93]                      = 5;
		$bd [19] [94]                      = 23;
		$bd [19] [95]                      = 11;
		$bd [19] [96]                      = 13;
		$bd [19] [97]                      = 12;
		$bd [19] [98]                      = 9;
		$bd [19] [99]                      = 9;
		$bd [19] [100]                     = 5;
		$bd [19] [101]                     = 8;
		$bd [19] [102]                     = 29;
		$bd [19] [103]                     = 22;
		$bd [19] [104]                     = 35;
		$bd [19] [105]                     = 45;
		$bd [19] [106]                     = 48;
		$bd [19] [107]                     = 43;
		$bd [19] [108]                     = 14;
		$bd [19] [109]                     = 31;
		$bd [19] [110]                     = 7;
		$bd [19] [111]                     = 10;
		$bd [19] [112]                     = 10;
		$bd [19] [113]                     = 9;
		$bd [19] [114]                     = 8;
		$bd [19] [115]                     = 18;
		$bd [19] [116]                     = 19;
		$bd [19] [117]                     = 2;
		$bd [19] [118]                     = 29;
		$bd [19] [119]                     = 176;
		$bd [19] [120]                     = 7;
		$bd [19] [121]                     = 8;
		$bd [19] [122]                     = 9;
		$bd [19] [123]                     = 4;
		$bd [19] [124]                     = 8;
		$bd [19] [125]                     = 5;
		$bd [19] [126]                     = 6;
		$bd [19] [127]                     = 5;
		$bd [19] [128]                     = 6;
		$bd [19] [129]                     = 8;
		$bd [19] [130]                     = 8;
		$bd [19] [131]                     = 3;
		$bd [19] [132]                     = 18;
		$bd [19] [133]                     = 3;
		$bd [19] [134]                     = 3;
		$bd [19] [135]                     = 21;
		$bd [19] [136]                     = 26;
		$bd [19] [137]                     = 9;
		$bd [19] [138]                     = 8;
		$bd [19] [139]                     = 24;
		$bd [19] [140]                     = 14;
		$bd [19] [141]                     = 10;
		$bd [19] [142]                     = 8;
		$bd [19] [143]                     = 12;
		$bd [19] [144]                     = 15;
		$bd [19] [145]                     = 21;
		$bd [19] [146]                     = 10;
		$bd [19] [147]                     = 20;
		$bd [19] [148]                     = 14;
		$bd [19] [149]                     = 9;
		$bd [19] [150]                     = 6;

		$bd [20] ["desc"] ["de"] ["long"]  = "Sprichwörter";
		$bd [20] ["desc"] ["de"] ["short"] = "Spr";
		$bd [20] ["desc"] ["en"] ["long"]  = "Proverbs";
		$bd [20] ["desc"] ["en"] ["short"] = "Prov";
		$bd [20] ["pat"]                   = "/^(Prov(erbs)?|Pr|Prv|Spr(ichw(ö|oe|ö)rter)?|Spri|Spr(ue|ü|ü)che)$/i";
		$bd [20] ["kapAnz"]                = 31;
		$bd [20] [1]                       = 33;
		$bd [20] [2]                       = 22;
		$bd [20] [3]                       = 35;
		$bd [20] [4]                       = 27;
		$bd [20] [5]                       = 23;
		$bd [20] [6]                       = 35;
		$bd [20] [7]                       = 27;
		$bd [20] [8]                       = 36;
		$bd [20] [9]                       = 18;
		$bd [20] [10]                      = 32;
		$bd [20] [11]                      = 31;
		$bd [20] [12]                      = 28;
		$bd [20] [13]                      = 25;
		$bd [20] [14]                      = 35;
		$bd [20] [15]                      = 33;
		$bd [20] [16]                      = 33;
		$bd [20] [17]                      = 28;
		$bd [20] [18]                      = 24;
		$bd [20] [19]                      = 29;
		$bd [20] [20]                      = 30;
		$bd [20] [21]                      = 31;
		$bd [20] [22]                      = 29;
		$bd [20] [23]                      = 35;
		$bd [20] [24]                      = 34;
		$bd [20] [25]                      = 28;
		$bd [20] [26]                      = 28;
		$bd [20] [27]                      = 27;
		$bd [20] [28]                      = 28;
		$bd [20] [29]                      = 27;
		$bd [20] [30]                      = 33;
		$bd [20] [31]                      = 31;

		$bd [21] ["desc"] ["de"] ["long"]  = "Prediger";
		$bd [21] ["desc"] ["de"] ["short"] = "Pred";
		$bd [21] ["desc"] ["en"] ["long"]  = "Ecclesiastes";
		$bd [21] ["desc"] ["en"] ["short"] = "Eccl";
		$bd [21] ["pat"]                   = "/^(Predi[gk]er|Pred|Koh(elet)?|Qoh|Qoheleth|Eccl(esiastes)?|Eccles|Ec)( Salomo)?$/i";
		$bd [21] ["kapAnz"]                = 12;
		$bd [21] [1]                       = 18;
		$bd [21] [2]                       = 26;
		$bd [21] [3]                       = 22;
		$bd [21] [4]                       = 16;
		$bd [21] [5]                       = 20;
		$bd [21] [6]                       = 12;
		$bd [21] [7]                       = 29;
		$bd [21] [8]                       = 17;
		$bd [21] [9]                       = 18;
		$bd [21] [10]                      = 20;
		$bd [21] [11]                      = 10;
		$bd [21] [12]                      = 14;

		$bd [22] ["desc"] ["de"] ["long"]  = "Hoheslied";
		$bd [22] ["desc"] ["de"] ["short"] = "Hld";
		$bd [22] ["desc"] ["en"] ["long"]  = "Song of Salomon";
		$bd [22] ["desc"] ["en"] ["short"] = "Song";
		$bd [22] ["pat"]                   = "/^(Hohes?lied|Hh?ld|Hohesl|Hohes Lied|Song[s]? of Salomo[n]?|Song of Songs|Song|So|SOS|Canticle of Canticles|Canticles)$/i";
		$bd [22] ["kapAnz"]                = 8;
		$bd [22] [1]                       = 17;
		$bd [22] [2]                       = 17;
		$bd [22] [3]                       = 11;
		$bd [22] [4]                       = 16;
		$bd [22] [5]                       = 16;
		$bd [22] [6]                       = 13;
		$bd [22] [7]                       = 13;
		$bd [22] [8]                       = 14;

		$bd [23] ["desc"] ["de"] ["long"]  = "Jesaja";
		$bd [23] ["desc"] ["de"] ["short"] = "Jes";
		$bd [23] ["desc"] ["en"] ["long"]  = "Isaiah";
		$bd [23] ["desc"] ["en"] ["short"] = "Isa";
		$bd [23] ["pat"]                   = "/^(Jesaja|Jes|Jesa|Isaiah|Isa?)$/i";
		$bd [23] ["kapAnz"]                = 66;
		$bd [23] [1]                       = 31;
		$bd [23] [2]                       = 22;
		$bd [23] [3]                       = 26;
		$bd [23] [4]                       = 6;
		$bd [23] [5]                       = 30;
		$bd [23] [6]                       = 13;
		$bd [23] [7]                       = 25;
		$bd [23] [8]                       = 22;
		$bd [23] [9]                       = 21;
		$bd [23] [10]                      = 34;
		$bd [23] [11]                      = 16;
		$bd [23] [12]                      = 6;
		$bd [23] [13]                      = 22;
		$bd [23] [14]                      = 32;
		$bd [23] [15]                      = 9;
		$bd [23] [16]                      = 14;
		$bd [23] [17]                      = 14;
		$bd [23] [18]                      = 7;
		$bd [23] [19]                      = 25;
		$bd [23] [20]                      = 6;
		$bd [23] [21]                      = 17;
		$bd [23] [22]                      = 25;
		$bd [23] [23]                      = 18;
		$bd [23] [24]                      = 23;
		$bd [23] [25]                      = 12;
		$bd [23] [26]                      = 21;
		$bd [23] [27]                      = 13;
		$bd [23] [28]                      = 29;
		$bd [23] [29]                      = 24;
		$bd [23] [30]                      = 33;
		$bd [23] [31]                      = 9;
		$bd [23] [32]                      = 20;
		$bd [23] [33]                      = 24;
		$bd [23] [34]                      = 17;
		$bd [23] [35]                      = 10;
		$bd [23] [36]                      = 22;
		$bd [23] [37]                      = 38;
		$bd [23] [38]                      = 22;
		$bd [23] [39]                      = 8;
		$bd [23] [40]                      = 31;
		$bd [23] [41]                      = 29;
		$bd [23] [42]                      = 25;
		$bd [23] [43]                      = 28;
		$bd [23] [44]                      = 28;
		$bd [23] [45]                      = 25;
		$bd [23] [46]                      = 13;
		$bd [23] [47]                      = 15;
		$bd [23] [48]                      = 22;
		$bd [23] [49]                      = 26;
		$bd [23] [50]                      = 11;
		$bd [23] [51]                      = 23;
		$bd [23] [52]                      = 15;
		$bd [23] [53]                      = 12;
		$bd [23] [54]                      = 17;
		$bd [23] [55]                      = 13;
		$bd [23] [56]                      = 12;
		$bd [23] [57]                      = 21;
		$bd [23] [58]                      = 14;
		$bd [23] [59]                      = 21;
		$bd [23] [60]                      = 22;
		$bd [23] [61]                      = 11;
		$bd [23] [62]                      = 12;
		$bd [23] [63]                      = 19;
		$bd [23] [64]                      = 12;
		$bd [23] [65]                      = 25;
		$bd [23] [66]                      = 24;

		$bd [24] ["desc"] ["de"] ["long"]  = "Jeremia";
		$bd [24] ["desc"] ["de"] ["short"] = "Jer";
		$bd [24] ["desc"] ["en"] ["long"]  = "Jeremiah";
		$bd [24] ["desc"] ["en"] ["short"] = "Jer";
		$bd [24] ["pat"]                   = "/^(Jeremia[h]?|Je|Jr|Jer|Jere|Jerem)$/i";
		$bd [24] ["kapAnz"]                = 52;
		$bd [24] [1]                       = 19;
		$bd [24] [2]                       = 37;
		$bd [24] [3]                       = 25;
		$bd [24] [4]                       = 31;
		$bd [24] [5]                       = 31;
		$bd [24] [6]                       = 30;
		$bd [24] [7]                       = 34;
		$bd [24] [8]                       = 22;
		$bd [24] [9]                       = 26;
		$bd [24] [10]                      = 25;
		$bd [24] [11]                      = 23;
		$bd [24] [12]                      = 17;
		$bd [24] [13]                      = 27;
		$bd [24] [14]                      = 22;
		$bd [24] [15]                      = 21;
		$bd [24] [16]                      = 21;
		$bd [24] [17]                      = 27;
		$bd [24] [18]                      = 23;
		$bd [24] [19]                      = 15;
		$bd [24] [20]                      = 18;
		$bd [24] [21]                      = 14;
		$bd [24] [22]                      = 30;
		$bd [24] [23]                      = 40;
		$bd [24] [24]                      = 10;
		$bd [24] [25]                      = 38;
		$bd [24] [26]                      = 24;
		$bd [24] [27]                      = 22;
		$bd [24] [28]                      = 17;
		$bd [24] [29]                      = 32;
		$bd [24] [30]                      = 24;
		$bd [24] [31]                      = 40;
		$bd [24] [32]                      = 44;
		$bd [24] [33]                      = 26;
		$bd [24] [34]                      = 22;
		$bd [24] [35]                      = 19;
		$bd [24] [36]                      = 32;
		$bd [24] [37]                      = 21;
		$bd [24] [38]                      = 28;
		$bd [24] [39]                      = 18;
		$bd [24] [40]                      = 16;
		$bd [24] [41]                      = 18;
		$bd [24] [42]                      = 22;
		$bd [24] [43]                      = 13;
		$bd [24] [44]                      = 30;
		$bd [24] [45]                      = 5;
		$bd [24] [46]                      = 28;
		$bd [24] [47]                      = 7;
		$bd [24] [48]                      = 47;
		$bd [24] [49]                      = 39;
		$bd [24] [50]                      = 46;
		$bd [24] [51]                      = 64;
		$bd [24] [52]                      = 34;
		$bd [24] [53]                      = 12;
		$bd [24] [54]                      = 17;
		$bd [24] [55]                      = 13;
		$bd [24] [56]                      = 12;
		$bd [24] [57]                      = 21;
		$bd [24] [58]                      = 14;
		$bd [24] [59]                      = 21;
		$bd [24] [60]                      = 22;
		$bd [24] [61]                      = 11;
		$bd [24] [62]                      = 12;
		$bd [24] [63]                      = 19;
		$bd [24] [64]                      = 12;
		$bd [24] [65]                      = 25;
		$bd [24] [66]                      = 24;

		$bd [25] ["desc"] ["de"] ["long"]  = "Klagelieder";
		$bd [25] ["desc"] ["de"] ["short"] = "Klgl";
		$bd [25] ["desc"] ["en"] ["long"]  = "Lamentations";
		$bd [25] ["desc"] ["en"] ["short"] = "Lam";
		$bd [25] ["pat"]                   = "/^(Klagelieder|Kla?a?gl|Klage|Kla|Lam(entations)?|La)$/i";
		$bd [25] ["kapAnz"]                = 5;
		$bd [25] [1]                       = 22;
		$bd [25] [2]                       = 22;
		$bd [25] [3]                       = 66;
		$bd [25] [4]                       = 22;
		$bd [25] [5]                       = 22;

		$bd [26] ["desc"] ["de"] ["long"]  = "Hesekiel";
		$bd [26] ["desc"] ["de"] ["short"] = "Hes";
		$bd [26] ["desc"] ["en"] ["long"]  = "Ezekiel";
		$bd [26] ["desc"] ["en"] ["short"] = "Ezek";
		$bd [26] ["pat"]                   = "/^(Ezechiel|Ezekiel|Ezechiël|Eze(k|ch)?|Ezk?|Hes|Hesekiel|Hesekiël)$/i";
		$bd [26] ["kapAnz"]                = 48;
		$bd [26] [1]                       = 28;
		$bd [26] [2]                       = 10;
		$bd [26] [3]                       = 27;
		$bd [26] [4]                       = 17;
		$bd [26] [5]                       = 17;
		$bd [26] [6]                       = 14;
		$bd [26] [7]                       = 27;
		$bd [26] [8]                       = 18;
		$bd [26] [9]                       = 11;
		$bd [26] [10]                      = 22;
		$bd [26] [11]                      = 25;
		$bd [26] [12]                      = 28;
		$bd [26] [13]                      = 23;
		$bd [26] [14]                      = 23;
		$bd [26] [15]                      = 8;
		$bd [26] [16]                      = 63;
		$bd [26] [17]                      = 24;
		$bd [26] [18]                      = 32;
		$bd [26] [19]                      = 14;
		$bd [26] [20]                      = 49;
		$bd [26] [21]                      = 32;
		$bd [26] [22]                      = 31;
		$bd [26] [23]                      = 49;
		$bd [26] [24]                      = 27;
		$bd [26] [25]                      = 17;
		$bd [26] [26]                      = 21;
		$bd [26] [27]                      = 36;
		$bd [26] [28]                      = 26;
		$bd [26] [29]                      = 21;
		$bd [26] [30]                      = 26;
		$bd [26] [31]                      = 18;
		$bd [26] [32]                      = 32;
		$bd [26] [33]                      = 33;
		$bd [26] [34]                      = 31;
		$bd [26] [35]                      = 15;
		$bd [26] [36]                      = 38;
		$bd [26] [37]                      = 28;
		$bd [26] [38]                      = 23;
		$bd [26] [39]                      = 29;
		$bd [26] [40]                      = 49;
		$bd [26] [41]                      = 26;
		$bd [26] [42]                      = 20;
		$bd [26] [43]                      = 27;
		$bd [26] [44]                      = 31;
		$bd [26] [45]                      = 25;
		$bd [26] [46]                      = 24;
		$bd [26] [47]                      = 23;
		$bd [26] [48]                      = 35;

		$bd [27] ["desc"] ["de"] ["long"]  = "Daniel";
		$bd [27] ["desc"] ["de"] ["short"] = "Dan";
		$bd [27] ["desc"] ["en"] ["long"]  = "Daniel";
		$bd [27] ["desc"] ["en"] ["short"] = "Dan";
		$bd [27] ["pat"]                   = "/^(Daniel|Da|Dan|Dn)$/i";
		$bd [27] ["kapAnz"]                = 14;
		$bd [27] [1]                       = 21;
		$bd [27] [2]                       = 49;
		$bd [27] [3]                       = 33;
		$bd [27] [4]                       = 37;
		$bd [27] [5]                       = 31;
		$bd [27] [6]                       = 29;
		$bd [27] [7]                       = 28;
		$bd [27] [8]                       = 27;
		$bd [27] [9]                       = 27;
		$bd [27] [10]                      = 21;
		$bd [27] [11]                      = 45;
		$bd [27] [12]                      = 13;
		$bd [27] [13]                      = 64;
		$bd [27] [14]                      = 42;

		$bd [28] ["desc"] ["de"] ["long"]  = "Hosea";
		$bd [28] ["desc"] ["de"] ["short"] = "Hos";
		$bd [28] ["desc"] ["en"] ["long"]  = "Hosea";
		$bd [28] ["desc"] ["en"] ["short"] = "Hos";
		$bd [28] ["pat"]                   = "/^(Hosea|Hos?)$/i";
		$bd [28] ["kapAnz"]                = 14;
		$bd [28] [1]                       = 21;
		$bd [28] [2]                       = 49;
		$bd [28] [3]                       = 30;
		$bd [28] [4]                       = 37;
		$bd [28] [5]                       = 31;
		$bd [28] [6]                       = 28;
		$bd [28] [7]                       = 28;
		$bd [28] [8]                       = 27;
		$bd [28] [9]                       = 27;
		$bd [28] [10]                      = 21;
		$bd [28] [11]                      = 45;
		$bd [28] [12]                      = 13;
		$bd [28] [13]                      = 64;
		$bd [28] [14]                      = 42;

		$bd [29] ["desc"] ["de"] ["long"]  = "Joel";
		$bd [29] ["desc"] ["de"] ["short"] = "Joel";
		$bd [29] ["desc"] ["en"] ["long"]  = "Joel";
		$bd [29] ["desc"] ["en"] ["short"] = "Joel";
		$bd [29] ["pat"]                   = "/^(Joel|Joe?|Jl|Joël)$/i";
		$bd [29] ["kapAnz"]                = 4;
		$bd [29] [1]                       = 20;
		$bd [29] [2]                       = 27;
		$bd [29] [3]                       = 5;
		$bd [29] [4]                       = 21;

		$bd [30] ["desc"] ["de"] ["long"]  = "Amos";
		$bd [30] ["desc"] ["de"] ["short"] = "Am";
		$bd [30] ["desc"] ["en"] ["long"]  = "Amos";
		$bd [30] ["desc"] ["en"] ["short"] = "Amos";
		$bd [30] ["pat"]                   = "/^(Amos|Am)$/i";
		$bd [30] ["kapAnz"]                = 9;
		$bd [30] [1]                       = 15;
		$bd [30] [2]                       = 16;
		$bd [30] [3]                       = 15;
		$bd [30] [4]                       = 13;
		$bd [30] [5]                       = 27;
		$bd [30] [6]                       = 14;
		$bd [30] [7]                       = 17;
		$bd [30] [8]                       = 14;
		$bd [30] [9]                       = 15;

		$bd [31] ["desc"] ["de"] ["long"]  = "Obadja";
		$bd [31] ["desc"] ["de"] ["short"] = "Obd";
		$bd [31] ["desc"] ["en"] ["long"]  = "Obadiah";
		$bd [31] ["desc"] ["en"] ["short"] = "Obad";
		$bd [31] ["pat"]                   = "/^(Obadiah|Obadja|Obad|Obd|Obj?)$/i";
		$bd [31] ["kapAnz"]                = 1;
		$bd [31] [1]                       = 21;

		$bd [32] ["desc"] ["de"] ["long"]  = "Jona";
		$bd [32] ["desc"] ["de"] ["short"] = "Jona";
		$bd [32] ["desc"] ["en"] ["long"]  = "Jonah";
		$bd [32] ["desc"] ["en"] ["short"] = "Jonah";
		$bd [32] ["pat"]                   = "/^(Jonah?|Jon|Jnh)$/i";
		$bd [32] ["kapAnz"]                = 4;
		$bd [32] [1]                       = 17;
		$bd [32] [2]                       = 11;
		$bd [32] [3]                       = 10;
		$bd [32] [4]                       = 11;

		$bd [33] ["desc"] ["de"] ["long"]  = "Micha";
		$bd [33] ["desc"] ["de"] ["short"] = "Mi";
		$bd [33] ["desc"] ["en"] ["long"]  = "Micah";
		$bd [33] ["desc"] ["en"] ["short"] = "Mic";
		$bd [33] ["pat"]                   = "/^(Micah|Mi(cha)?|Mic|Mch)$/i";
		$bd [33] ["kapAnz"]                = 7;
		$bd [33] [1]                       = 16;
		$bd [33] [2]                       = 13;
		$bd [33] [3]                       = 12;
		$bd [33] [4]                       = 13;
		$bd [33] [5]                       = 15;
		$bd [33] [6]                       = 16;
		$bd [33] [7]                       = 20;

		$bd [34] ["desc"] ["de"] ["long"]  = "Nahum";
		$bd [34] ["desc"] ["de"] ["short"] = "Nah";
		$bd [34] ["desc"] ["en"] ["long"]  = "Nahum";
		$bd [34] ["desc"] ["en"] ["short"] = "Nah";
		$bd [34] ["pat"]                   = "/^Nah(um)?$/i";
		$bd [34] ["kapAnz"]                = 3;
		$bd [34] [1]                       = 15;
		$bd [34] [2]                       = 13;
		$bd [34] [3]                       = 19;

		$bd [35] ["desc"] ["de"] ["long"]  = "Habakuk";
		$bd [35] ["desc"] ["de"] ["short"] = "Hab";
		$bd [35] ["desc"] ["en"] ["long"]  = "Habakkuk";
		$bd [35] ["desc"] ["en"] ["short"] = "Hab";
		$bd [35] ["pat"]                   = "/^(Habak[k]?uk|Hab)$/i";
		$bd [35] ["kapAnz"]                = 3;
		$bd [35] [1]                       = 17;
		$bd [35] [2]                       = 20;
		$bd [35] [3]                       = 19;

		$bd [36] ["desc"] ["de"] ["long"]  = "Zefanja";
		$bd [36] ["desc"] ["de"] ["short"] = "Zef";
		$bd [36] ["desc"] ["en"] ["long"]  = "Zephaniah";
		$bd [36] ["desc"] ["en"] ["short"] = "Zeph";
		$bd [36] ["pat"]                   = "/^(([ZS]e(ph|f)((an)([ij](ah?)?)?)?)|Zph|Zep|Zp)$/i";
		$bd [36] ["kapAnz"]                = 3;
		$bd [36] [1]                       = 18;
		$bd [36] [2]                       = 15;
		$bd [36] [3]                       = 20;

		$bd [37] ["desc"] ["de"] ["long"]  = "Haggai";
		$bd [37] ["desc"] ["de"] ["short"] = "Hag";
		$bd [37] ["desc"] ["en"] ["long"]  = "Haggai";
		$bd [37] ["desc"] ["en"] ["short"] = "Hag";
		$bd [37] ["pat"]                   = "/^Hag(gai)?|Hgg?$/i";
		$bd [37] ["kapAnz"]                = 2;
		$bd [37] [1]                       = 15;
		$bd [37] [2]                       = 23;

		$bd [38] ["desc"] ["de"] ["long"]  = "Sacharja";
		$bd [38] ["desc"] ["de"] ["short"] = "Sach";
		$bd [38] ["desc"] ["en"] ["long"]  = "Zechariah";
		$bd [38] ["desc"] ["en"] ["short"] = "Zech";
		$bd [38] ["pat"]                   = "/^(Zech(ariah)?|[SZ]ach(ar[ij]a)?|Zch|Zec|Zc)$/i";
		$bd [38] ["kapAnz"]                = 14;
		$bd [38] [1]                       = 21;
		$bd [38] [2]                       = 13;
		$bd [38] [3]                       = 10;
		$bd [38] [4]                       = 14;
		$bd [38] [5]                       = 11;
		$bd [38] [6]                       = 15;
		$bd [38] [7]                       = 14;
		$bd [38] [8]                       = 23;
		$bd [38] [9]                       = 17;
		$bd [38] [10]                      = 12;
		$bd [38] [11]                      = 17;
		$bd [38] [12]                      = 14;
		$bd [38] [13]                      = 9;
		$bd [38] [14]                      = 21;

		$bd [39] ["desc"] ["de"] ["long"]  = "Maleachi";
		$bd [39] ["desc"] ["de"] ["short"] = "Mal";
		$bd [39] ["desc"] ["en"] ["long"]  = "Malachi";
		$bd [39] ["desc"] ["en"] ["short"] = "Mal";
		$bd [39] ["pat"]                   = "/^(Mal[e]?achi|Mal|Ml)$/i";
		$bd [39] ["kapAnz"]                = 3;
		$bd [39] [1]                       = 14;
		$bd [39] [2]                       = 17;
		$bd [39] [3]                       = 18;
		$bd [39] [4]                       = 6;

		$bd [40] ["desc"] ["de"] ["long"]  = "Matthäus";
		$bd [40] ["desc"] ["de"] ["short"] = "Mt";
		$bd [40] ["desc"] ["en"] ["long"]  = "Matthew";
		$bd [40] ["desc"] ["en"] ["short"] = "Matt";
		$bd [40] ["pat"]                   = "/^(Matthew|Matt?h?(ä|ae|e|ä)us(evangelium)?|Mt|Matt?h?)$/i";
		$bd [40] ["kapAnz"]                = 28;
		$bd [40] [1]                       = 25;
		$bd [40] [2]                       = 23;
		$bd [40] [3]                       = 17;
		$bd [40] [4]                       = 25;
		$bd [40] [5]                       = 48;
		$bd [40] [6]                       = 34;
		$bd [40] [7]                       = 29;
		$bd [40] [8]                       = 34;
		$bd [40] [9]                       = 38;
		$bd [40] [10]                      = 42;
		$bd [40] [11]                      = 30;
		$bd [40] [12]                      = 50;
		$bd [40] [13]                      = 58;
		$bd [40] [14]                      = 36;
		$bd [40] [15]                      = 39;
		$bd [40] [16]                      = 28;
		$bd [40] [17]                      = 27;
		$bd [40] [18]                      = 35;
		$bd [40] [19]                      = 30;
		$bd [40] [20]                      = 34;
		$bd [40] [21]                      = 46;
		$bd [40] [22]                      = 46;
		$bd [40] [23]                      = 39;
		$bd [40] [24]                      = 51;
		$bd [40] [25]                      = 46;
		$bd [40] [26]                      = 75;
		$bd [40] [27]                      = 66;
		$bd [40] [28]                      = 20;

		$bd [41] ["desc"] ["de"] ["long"]  = "Markus";
		$bd [41] ["desc"] ["de"] ["short"] = "Mk";
		$bd [41] ["desc"] ["en"] ["long"]  = "Mark";
		$bd [41] ["desc"] ["en"] ["short"] = "Mark";
		$bd [41] ["pat"]                   = "/^(Mar[ck](us(evangelium)?)?|M[ck]|Mrk|Mr)$/i";
		$bd [41] ["kapAnz"]                = 16;
		$bd [41] [1]                       = 45;
		$bd [41] [2]                       = 28;
		$bd [41] [3]                       = 35;
		$bd [41] [4]                       = 41;
		$bd [41] [5]                       = 43;
		$bd [41] [6]                       = 56;
		$bd [41] [7]                       = 37;
		$bd [41] [8]                       = 38;
		$bd [41] [9]                       = 50;
		$bd [41] [10]                      = 52;
		$bd [41] [11]                      = 33;
		$bd [41] [12]                      = 44;
		$bd [41] [13]                      = 37;
		$bd [41] [14]                      = 72;
		$bd [41] [15]                      = 47;
		$bd [41] [16]                      = 20;

		$bd [42] ["desc"] ["de"] ["long"]  = "Lukas";
		$bd [42] ["desc"] ["de"] ["short"] = "Lk";
		$bd [42] ["desc"] ["en"] ["long"]  = "Luke";
		$bd [42] ["desc"] ["en"] ["short"] = "Luke";
		$bd [42] ["pat"]                   = "/^(Luk(e|as(evangelium)?)?|L[ck]|Luc(as)?)$/i";
		$bd [42] ["kapAnz"]                = 24;
		$bd [42] [1]                       = 80;
		$bd [42] [2]                       = 52;
		$bd [42] [3]                       = 38;
		$bd [42] [4]                       = 44;
		$bd [42] [5]                       = 39;
		$bd [42] [6]                       = 49;
		$bd [42] [7]                       = 50;
		$bd [42] [8]                       = 56;
		$bd [42] [9]                       = 62;
		$bd [42] [10]                      = 42;
		$bd [42] [11]                      = 54;
		$bd [42] [12]                      = 59;
		$bd [42] [13]                      = 35;
		$bd [42] [14]                      = 35;
		$bd [42] [15]                      = 32;
		$bd [42] [16]                      = 31;
		$bd [42] [17]                      = 37;
		$bd [42] [18]                      = 43;
		$bd [42] [19]                      = 48;
		$bd [42] [20]                      = 47;
		$bd [42] [21]                      = 38;
		$bd [42] [22]                      = 71;
		$bd [42] [23]                      = 56;
		$bd [42] [24]                      = 53;

		$bd [43] ["desc"] ["de"] ["long"]  = "Johannes";
		$bd [43] ["desc"] ["de"] ["short"] = "Joh";
		$bd [43] ["desc"] ["en"] ["long"]  = "John";
		$bd [43] ["desc"] ["en"] ["short"] = "John";
		$bd [43] ["pat"]                   = "/^(John|Jo?h|Johannes(evangelium)?|Jhn|Jn)$/i";
		$bd [43] ["kapAnz"]                = 21;
		$bd [43] [1]                       = 51;
		$bd [43] [2]                       = 25;
		$bd [43] [3]                       = 36;
		$bd [43] [4]                       = 54;
		$bd [43] [5]                       = 47;
		$bd [43] [6]                       = 71;
		$bd [43] [7]                       = 53;
		$bd [43] [8]                       = 59;
		$bd [43] [9]                       = 41;
		$bd [43] [10]                      = 42;
		$bd [43] [11]                      = 57;
		$bd [43] [12]                      = 50;
		$bd [43] [13]                      = 38;
		$bd [43] [14]                      = 31;
		$bd [43] [15]                      = 27;
		$bd [43] [16]                      = 33;
		$bd [43] [17]                      = 26;
		$bd [43] [18]                      = 40;
		$bd [43] [19]                      = 42;
		$bd [43] [20]                      = 31;
		$bd [43] [21]                      = 25;

		$bd [44] ["desc"] ["de"] ["long"]  = "Apostelgeschichte";
		$bd [44] ["desc"] ["de"] ["short"] = "Apg";
		$bd [44] ["desc"] ["en"] ["long"]  = "Acts";
		$bd [44] ["desc"] ["en"] ["short"] = "Acts";
		$bd [44] ["pat"]                   = "/^(Acts?|Ac|Apostelgeschichte|Apg)$/i";
		$bd [44] ["kapAnz"]                = 28;
		$bd [44] [1]                       = 26;
		$bd [44] [2]                       = 47;
		$bd [44] [3]                       = 26;
		$bd [44] [4]                       = 37;
		$bd [44] [5]                       = 42;
		$bd [44] [6]                       = 15;
		$bd [44] [7]                       = 60;
		$bd [44] [8]                       = 40;
		$bd [44] [9]                       = 43;
		$bd [44] [10]                      = 48;
		$bd [44] [11]                      = 30;
		$bd [44] [12]                      = 25;
		$bd [44] [13]                      = 52;
		$bd [44] [14]                      = 28;
		$bd [44] [15]                      = 41;
		$bd [44] [16]                      = 40;
		$bd [44] [17]                      = 34;
		$bd [44] [18]                      = 28;
		$bd [44] [19]                      = 41;
		$bd [44] [20]                      = 38;
		$bd [44] [21]                      = 40;
		$bd [44] [22]                      = 30;
		$bd [44] [23]                      = 35;
		$bd [44] [24]                      = 27;
		$bd [44] [25]                      = 27;
		$bd [44] [26]                      = 32;
		$bd [44] [27]                      = 44;
		$bd [44] [28]                      = 31;

		$bd [45] ["desc"] ["de"] ["long"]  = "Römer";
		$bd [45] ["desc"] ["de"] ["short"] = "Röm";
		$bd [45] ["desc"] ["en"] ["long"]  = "Romans";
		$bd [45] ["desc"] ["en"] ["short"] = "Rom";
		$bd [45] ["pat"]                   = "/^(Romans|R(ö|oe|o|ö)m(er(brief)?)?|Ro|Rm)$/i";
		$bd [45] ["kapAnz"]                = 16;
		$bd [45] [1]                       = 32;
		$bd [45] [2]                       = 29;
		$bd [45] [3]                       = 31;
		$bd [45] [4]                       = 25;
		$bd [45] [5]                       = 21;
		$bd [45] [6]                       = 23;
		$bd [45] [7]                       = 25;
		$bd [45] [8]                       = 39;
		$bd [45] [9]                       = 33;
		$bd [45] [10]                      = 21;
		$bd [45] [11]                      = 36;
		$bd [45] [12]                      = 21;
		$bd [45] [13]                      = 14;
		$bd [45] [14]                      = 23;
		$bd [45] [15]                      = 33;
		$bd [45] [16]                      = 27;

		$bd [46] ["desc"] ["de"] ["long"]  = "1. Korinther";
		$bd [46] ["desc"] ["de"] ["short"] = "1Kor";
		$bd [46] ["desc"] ["en"] ["long"]  = "1 Corinthians";
		$bd [46] ["desc"] ["en"] ["short"] = "1Cor";
		$bd [46] ["pat"]                   = "/^({$_first}(Corinthians|Korinth?er(brief)?|Kor|Cor|Cor))$/i";
		$bd [46] ["kapAnz"]                = 16;
		$bd [46] [1]                       = 31;
		$bd [46] [2]                       = 16;
		$bd [46] [3]                       = 23;
		$bd [46] [4]                       = 21;
		$bd [46] [5]                       = 13;
		$bd [46] [6]                       = 20;
		$bd [46] [7]                       = 40;
		$bd [46] [8]                       = 13;
		$bd [46] [9]                       = 27;
		$bd [46] [10]                      = 33;
		$bd [46] [11]                      = 34;
		$bd [46] [12]                      = 31;
		$bd [46] [13]                      = 13;
		$bd [46] [14]                      = 40;
		$bd [46] [15]                      = 58;
		$bd [46] [16]                      = 24;

		$bd [47] ["desc"] ["de"] ["long"]  = "2. Korinther";
		$bd [47] ["desc"] ["de"] ["short"] = "2Kor";
		$bd [47] ["desc"] ["en"] ["long"]  = "2 Corinthians";
		$bd [47] ["desc"] ["en"] ["short"] = "2Cor";
		$bd [47] ["pat"]                   = "/^({$_second}(Corinthians|Korint[h]?er(brief)?|Kor|Cor))$/i";
		$bd [47] ["kapAnz"]                = 13;
		$bd [47] [1]                       = 24;
		$bd [47] [2]                       = 17;
		$bd [47] [3]                       = 18;
		$bd [47] [4]                       = 18;
		$bd [47] [5]                       = 21;
		$bd [47] [6]                       = 18;
		$bd [47] [7]                       = 16;
		$bd [47] [8]                       = 24;
		$bd [47] [9]                       = 15;
		$bd [47] [10]                      = 18;
		$bd [47] [11]                      = 33;
		$bd [47] [12]                      = 21;
		$bd [47] [13]                      = 14;

		$bd [48] ["desc"] ["de"] ["long"]  = "Galater";
		$bd [48] ["desc"] ["de"] ["short"] = "Gal";
		$bd [48] ["desc"] ["en"] ["long"]  = "Galatians";
		$bd [48] ["desc"] ["en"] ["short"] = "Gal";
		$bd [48] ["pat"]                   = "/^(Galatians|Gal(ater(brief)?)?|Ga)$/i";
		$bd [48] ["kapAnz"]                = 6;
		$bd [48] [1]                       = 24;
		$bd [48] [2]                       = 21;
		$bd [48] [3]                       = 29;
		$bd [48] [4]                       = 31;
		$bd [48] [5]                       = 26;
		$bd [48] [6]                       = 18;

		$bd [49] ["desc"] ["de"] ["long"]  = "Epheser";
		$bd [49] ["desc"] ["de"] ["short"] = "Eph";
		$bd [49] ["desc"] ["en"] ["long"]  = "Ephesians";
		$bd [49] ["desc"] ["en"] ["short"] = "Eph";
		$bd [49] ["pat"]                   = "/^(Ephesians|Ephes[s]?er(brief)?|Eph|Ef)$/i";
		$bd [49] ["kapAnz"]                = 6;
		$bd [49] [1]                       = 23;
		$bd [49] [2]                       = 22;
		$bd [49] [3]                       = 21;
		$bd [49] [4]                       = 32;
		$bd [49] [5]                       = 33;
		$bd [49] [6]                       = 24;

		$bd [50] ["desc"] ["de"] ["long"]  = "Philipper";
		$bd [50] ["desc"] ["de"] ["short"] = "Phil";
		$bd [50] ["desc"] ["en"] ["long"]  = "Philippians";
		$bd [50] ["desc"] ["en"] ["short"] = "Phil";
		$bd [50] ["pat"]                   = "/^(Philippians|Phil(ipper(brief)?)?|Ph|Php)$/i";
		$bd [50] ["kapAnz"]                = 4;
		$bd [50] [1]                       = 30;
		$bd [50] [2]                       = 30;
		$bd [50] [3]                       = 21;
		$bd [50] [4]                       = 23;

		$bd [51] ["desc"] ["de"] ["long"]  = "Kolosser";
		$bd [51] ["desc"] ["de"] ["short"] = "Kol";
		$bd [51] ["desc"] ["en"] ["long"]  = "Colossians";
		$bd [51] ["desc"] ["en"] ["short"] = "Col";
		$bd [51] ["pat"]                   = "/^(Col(ossians)?|Kol(osser(brief)?)?)$/i";
		$bd [51] ["kapAnz"]                = 4;
		$bd [51] [1]                       = 29;
		$bd [51] [2]                       = 23;
		$bd [51] [3]                       = 25;
		$bd [51] [4]                       = 18;

		$bd [52] ["desc"] ["de"] ["long"]  = "1. Thessalonicher";
		$bd [52] ["desc"] ["de"] ["short"] = "1Thess";
		$bd [52] ["desc"] ["en"] ["long"]  = "1 Thessalonians";
		$bd [52] ["desc"] ["en"] ["short"] = "1Thess";
		$bd [52] ["pat"]                   = "/^({$_first}(Th|Th?ess?|Th|Thessalonicher(brief)?|Thessalonians))$/i";
		$bd [52] ["kapAnz"]                = 5;
		$bd [52] [1]                       = 10;
		$bd [52] [2]                       = 20;
		$bd [52] [3]                       = 13;
		$bd [52] [4]                       = 18;
		$bd [52] [5]                       = 28;

		$bd [53] ["desc"] ["de"] ["long"]  = "2. Thessalonicher";
		$bd [53] ["desc"] ["de"] ["short"] = "2Thess";
		$bd [53] ["desc"] ["en"] ["long"]  = "2 Thessalonians";
		$bd [53] ["desc"] ["en"] ["short"] = "2Thess";
		$bd [53] ["pat"]                   = "/^({$_second}(Th?ess?|Th|Thessalonicher(brief)?|Thessalonians))$/i";
		$bd [53] ["kapAnz"]                = 3;
		$bd [53] [1]                       = 12;
		$bd [53] [2]                       = 17;
		$bd [53] [3]                       = 18;

		$bd [54] ["desc"] ["de"] ["long"]  = "1. Timotheus";
		$bd [54] ["desc"] ["de"] ["short"] = "1Tim";
		$bd [54] ["desc"] ["en"] ["long"]  = "1 Timothy";
		$bd [54] ["desc"] ["en"] ["short"] = "1Tim";
		$bd [54] ["pat"]                   = "/^({$_first}(Tim(otheus(brief)?)?|Timothy|Ti))$/i";
		$bd [54] ["kapAnz"]                = 6;
		$bd [54] [1]                       = 20;
		$bd [54] [2]                       = 15;
		$bd [54] [3]                       = 16;
		$bd [54] [4]                       = 16;
		$bd [54] [5]                       = 25;
		$bd [54] [6]                       = 21;

		$bd [55] ["desc"] ["de"] ["long"]  = "2. Timotheus";
		$bd [55] ["desc"] ["de"] ["short"] = "2Tim";
		$bd [55] ["desc"] ["en"] ["long"]  = "2 Timothy";
		$bd [55] ["desc"] ["en"] ["short"] = "2Tim";
		$bd [55] ["pat"]                   = "/^({$_second}(Tim(otheus(brief)?)?|Timothy|Ti))$/i";
		$bd [55] ["kapAnz"]                = 4;
		$bd [55] [1]                       = 18;
		$bd [55] [2]                       = 26;
		$bd [55] [3]                       = 17;
		$bd [55] [4]                       = 22;

		$bd [56] ["desc"] ["de"] ["long"]  = "Titus";
		$bd [56] ["desc"] ["de"] ["short"] = "Tit";
		$bd [56] ["desc"] ["en"] ["long"]  = "Titus";
		$bd [56] ["desc"] ["en"] ["short"] = "Titus";
		$bd [56] ["pat"]                   = "/^Tit(us(brief)?)?$/i";
		$bd [56] ["kapAnz"]                = 3;
		$bd [56] [1]                       = 16;
		$bd [56] [2]                       = 15;
		$bd [56] [3]                       = 15;

		$bd [57] ["desc"] ["de"] ["long"]  = "Philemon";
		$bd [57] ["desc"] ["de"] ["short"] = "Phlm";
		$bd [57] ["desc"] ["en"] ["long"]  = "Philemon";
		$bd [57] ["desc"] ["en"] ["short"] = "Phlm";
		$bd [57] ["pat"]                   = "/^(Filem(on)?|Philemon(brief)?|Phil?e?m|Phl?m)$/i";
		$bd [57] ["kapAnz"]                = 1;
		$bd [57] [1]                       = 25;

		$bd [58] ["desc"] ["de"] ["long"]  = "Hebräer";
		$bd [58] ["desc"] ["de"] ["short"] = "Hebr";
		$bd [58] ["desc"] ["en"] ["long"]  = "Hebrews";
		$bd [58] ["desc"] ["en"] ["short"] = "Heb";
		$bd [58] ["pat"]                   = "/^(Hebrews|Hebr(ä|ae|ä)er(brief)?|Hebr(ä|ae|ä)?|Heb)$/i";
		$bd [58] ["kapAnz"]                = 13;
		$bd [58] [1]                       = 14;
		$bd [58] [2]                       = 18;
		$bd [58] [3]                       = 19;
		$bd [58] [4]                       = 16;
		$bd [58] [5]                       = 14;
		$bd [58] [6]                       = 20;
		$bd [58] [7]                       = 28;
		$bd [58] [8]                       = 13;
		$bd [58] [9]                       = 28;
		$bd [58] [10]                      = 39;
		$bd [58] [11]                      = 40;
		$bd [58] [12]                      = 29;
		$bd [58] [13]                      = 25;

		$bd [59] ["desc"] ["de"] ["long"]  = "Jakobus";
		$bd [59] ["desc"] ["de"] ["short"] = "Jak";
		$bd [59] ["desc"] ["en"] ["long"]  = "James";
		$bd [59] ["desc"] ["en"] ["short"] = "Jas";
		$bd [59] ["pat"]                   = "/^(James|Jak(obus(brief)?)?|Jas|Jm)$/i";
		$bd [59] ["kapAnz"]                = 5;
		$bd [59] [1]                       = 27;
		$bd [59] [2]                       = 26;
		$bd [59] [3]                       = 18;
		$bd [59] [4]                       = 17;
		$bd [59] [5]                       = 20;

		$bd [60] ["desc"] ["de"] ["long"]  = "1. Petrus";
		$bd [60] ["desc"] ["de"] ["short"] = "1Petr";
		$bd [60] ["desc"] ["en"] ["long"]  = "1 Peter";
		$bd [60] ["desc"] ["en"] ["short"] = "1Pet";
		$bd [60] ["pat"]                   = "/^({$_first}(Peter|Petr(us(brief)?)?|Pet?))$/i";
		$bd [60] ["kapAnz"]                = 5;
		$bd [60] [1]                       = 25;
		$bd [60] [2]                       = 25;
		$bd [60] [3]                       = 22;
		$bd [60] [4]                       = 19;
		$bd [60] [5]                       = 14;

		$bd [61] ["desc"] ["de"] ["long"]  = "2. Petrus";
		$bd [61] ["desc"] ["de"] ["short"] = "2Petr";
		$bd [61] ["desc"] ["en"] ["long"]  = "2 Peter";
		$bd [61] ["desc"] ["en"] ["short"] = "2Pet";
		$bd [61] ["pat"]                   = "/^({$_second}(Peter|Petr(us(brief)?)?|Pet?))$/i";
		$bd [61] ["kapAnz"]                = 3;
		$bd [61] [1]                       = 21;
		$bd [61] [2]                       = 22;
		$bd [61] [3]                       = 18;

		$bd [62] ["desc"] ["de"] ["long"]  = "1. Johannes";
		$bd [62] ["desc"] ["de"] ["short"] = "1Joh";
		$bd [62] ["desc"] ["en"] ["long"]  = "1 John";
		$bd [62] ["desc"] ["en"] ["short"] = "1John";
		$bd [62] ["pat"]                   = "/^({$_first}(John|Joh(annes(brief)?)?|Jo|Jn|Jhn))$/i";
		$bd [62] ["kapAnz"]                = 5;
		$bd [62] [1]                       = 10;
		$bd [62] [2]                       = 29;
		$bd [62] [3]                       = 24;
		$bd [62] [4]                       = 21;
		$bd [62] [5]                       = 21;

		$bd [63] ["desc"] ["de"] ["long"]  = "2. Johannes";
		$bd [63] ["desc"] ["de"] ["short"] = "2Joh";
		$bd [63] ["desc"] ["en"] ["long"]  = "2 John";
		$bd [63] ["desc"] ["en"] ["short"] = "2John";
		$bd [63] ["pat"]                   = "/^({$_second}(John|Joh(annes(brief)?)?|Jn|Jhn))$/i";
		$bd [63] ["kapAnz"]                = 1;
		$bd [63] [1]                       = 13;

		$bd [64] ["desc"] ["de"] ["long"]  = "3. Johannes";
		$bd [64] ["desc"] ["de"] ["short"] = "3Joh";
		$bd [64] ["desc"] ["en"] ["long"]  = "3 John";
		$bd [64] ["desc"] ["en"] ["short"] = "3John";
		$bd [64] ["pat"]                   = "/^({$_third}(John|Joh(annes(brief)?)?|Jn|Jhn))$/i";
		$bd [64] ["kapAnz"]                = 1;
		$bd [64] [1]                       = 14;

		$bd [65] ["desc"] ["de"] ["long"]  = "Judas";
		$bd [65] ["desc"] ["de"] ["short"] = "Jud";
		$bd [65] ["desc"] ["en"] ["long"]  = "Jude";
		$bd [65] ["desc"] ["en"] ["short"] = "Jude";
		$bd [65] ["pat"]                   = "/^(Jude|Jud(as(brief)?)?|Judb|Jd)$/i";
		$bd [65] ["kapAnz"]                = 1;
		$bd [65] [1]                       = 25;

		$bd [66] ["desc"] ["de"] ["long"]  = "Offenbarung";
		$bd [66] ["desc"] ["de"] ["short"] = "Offb";
		$bd [66] ["desc"] ["en"] ["long"]  = "Revelation";
		$bd [66] ["desc"] ["en"] ["short"] = "Rev";
		$bd [66] ["pat"]                   = "/^(The Revelation|Revelation|Rev|Re|Of[f]?enb[h]?arung( des (Johannes|Joh))?|Off|Of[f]?b|Apo?[ck]|Apokalypse)$/i";
		$bd [66] ["kapAnz"]                = 22;
		$bd [66] [1]                       = 20;
		$bd [66] [2]                       = 29;
		$bd [66] [3]                       = 22;
		$bd [66] [4]                       = 11;
		$bd [66] [5]                       = 14;
		$bd [66] [6]                       = 17;
		$bd [66] [7]                       = 17;
		$bd [66] [8]                       = 13;
		$bd [66] [9]                       = 21;
		$bd [66] [10]                      = 11;
		$bd [66] [11]                      = 19;
		$bd [66] [12]                      = 17;
		$bd [66] [13]                      = 18;
		$bd [66] [14]                      = 20;
		$bd [66] [15]                      = 8;
		$bd [66] [16]                      = 21;
		$bd [66] [17]                      = 18;
		$bd [66] [18]                      = 24;
		$bd [66] [19]                      = 21;
		$bd [66] [20]                      = 15;
		$bd [66] [21]                      = 27;
		$bd [66] [22]                      = 21;

		$bd [67] ["desc"] ["de"] ["long"]  = "Tobit";
		$bd [67] ["desc"] ["de"] ["short"] = "Tob";
		$bd [67] ["desc"] ["en"] ["long"]  = "Tob";
		$bd [67] ["desc"] ["en"] ["short"] = "Tob";
		$bd [67] ["pat"]                   = "/^Tob(it|ias)?$/i";
		$bd [67] ["kapAnz"]                = 14;
		$bd [67] [1]                       = 22;
		$bd [67] [2]                       = 14;
		$bd [67] [3]                       = 17;
		$bd [67] [4]                       = 21;
		$bd [67] [5]                       = 22;
		$bd [67] [6]                       = 17;
		$bd [67] [7]                       = 18;
		$bd [67] [8]                       = 21;
		$bd [67] [9]                       = 6;
		$bd [67] [10]                      = 12;
		$bd [67] [11]                      = 19;
		$bd [67] [12]                      = 22;
		$bd [67] [13]                      = 18;
		$bd [67] [14]                      = 15;
		$bd [67] [15]                      = 8;
		$bd [67] [16]                      = 21;
		$bd [67] [17]                      = 18;
		$bd [67] [18]                      = 24;
		$bd [67] [19]                      = 21;
		$bd [67] [20]                      = 15;
		$bd [67] [21]                      = 27;
		$bd [67] [22]                      = 21;

		$bd [68] ["desc"] ["de"] ["long"]  = "Judith";
		$bd [68] ["desc"] ["de"] ["short"] = "Jdt";
		$bd [68] ["desc"] ["en"] ["long"]  = "Jdt";
		$bd [68] ["desc"] ["en"] ["short"] = "Jdt";
		$bd [68] ["pat"]                   = "/^(Judith?|Jdth?)$/i";
		$bd [68] ["kapAnz"]                = 16;
		$bd [68] [1]                       = 16;
		$bd [68] [2]                       = 28;
		$bd [68] [3]                       = 10;
		$bd [68] [4]                       = 15;
		$bd [68] [5]                       = 24;
		$bd [68] [6]                       = 21;
		$bd [68] [7]                       = 32;
		$bd [68] [8]                       = 36;
		$bd [68] [9]                       = 14;
		$bd [68] [10]                      = 23;
		$bd [68] [11]                      = 23;
		$bd [68] [12]                      = 20;
		$bd [68] [13]                      = 20;
		$bd [68] [14]                      = 19;
		$bd [68] [15]                      = 13;
		$bd [68] [16]                      = 25;

		$bd [69] ["desc"] ["de"] ["long"]  = "1. Makkabäer";
		$bd [69] ["desc"] ["de"] ["short"] = "1Makk";
		$bd [69] ["desc"] ["en"] ["long"]  = "1Macc";
		$bd [69] ["desc"] ["en"] ["short"] = "1Macc";
		$bd [69] ["pat"]                   = "/^({$_first}(Ma?[ck][ck]?[a]?|Makkab(ä|ae|ä)er|Maccabees))$/i";
		$bd [69] ["kapAnz"]                = 16;
		$bd [69] [1]                       = 64;
		$bd [69] [2]                       = 70;
		$bd [69] [3]                       = 60;
		$bd [69] [4]                       = 61;
		$bd [69] [5]                       = 68;
		$bd [69] [6]                       = 63;
		$bd [69] [7]                       = 49;
		$bd [69] [8]                       = 32;
		$bd [69] [9]                       = 73;
		$bd [69] [10]                      = 89;
		$bd [69] [11]                      = 74;
		$bd [69] [12]                      = 53;
		$bd [69] [13]                      = 53;
		$bd [69] [14]                      = 49;
		$bd [69] [15]                      = 41;
		$bd [69] [16]                      = 24;

		$bd [70] ["desc"] ["de"] ["long"]  = "2. Makkabäer";
		$bd [70] ["desc"] ["de"] ["short"] = "2Makk";
		$bd [70] ["desc"] ["en"] ["long"]  = "2Macc";
		$bd [70] ["desc"] ["en"] ["short"] = "2Macc";
		$bd [70] ["pat"]                   = "/^({$_second}(Ma?[ck][ck]?[a]?|Makkab(ä|ae|ä)er|Maccabees))$/i";
		$bd [70] ["kapAnz"]                = 15;
		$bd [70] [1]                       = 36;
		$bd [70] [2]                       = 32;
		$bd [70] [3]                       = 40;
		$bd [70] [4]                       = 50;
		$bd [70] [5]                       = 27;
		$bd [70] [6]                       = 31;
		$bd [70] [7]                       = 42;
		$bd [70] [8]                       = 36;
		$bd [70] [9]                       = 29;
		$bd [70] [10]                      = 38;
		$bd [70] [11]                      = 38;
		$bd [70] [12]                      = 45;
		$bd [70] [13]                      = 26;
		$bd [70] [14]                      = 46;
		$bd [70] [15]                      = 39;

		$bd [71] ["desc"] ["de"] ["long"]  = "3. Makkabäer";
		$bd [71] ["desc"] ["de"] ["short"] = "3Makk";
		$bd [71] ["desc"] ["en"] ["long"]  = "3Macc";
		$bd [71] ["desc"] ["en"] ["short"] = "3Macc";
		$bd [71] ["pat"]                   = "/^({$_third}(Ma?[ck][ck]?[a]?|Makkab(ä|ae|ä)er|Maccabees))$/i";
		$bd [71] ["kapAnz"]                = 7;
		$bd [71] [1]                       = 29;

		$bd [72] ["desc"] ["de"] ["long"]  = "Weisheit";
		$bd [72] ["desc"] ["de"] ["short"] = "Weish";
		$bd [72] ["desc"] ["en"] ["long"]  = "Wis";
		$bd [72] ["desc"] ["en"] ["short"] = "Wis";
		$bd [72] ["pat"]                   = "/^Weish(eit)?|Wis?|Wisdom$/i";
		$bd [72] ["kapAnz"]                = 19;
		$bd [72] [1]                       = 16;
		$bd [72] [2]                       = 24;
		$bd [72] [3]                       = 19;
		$bd [72] [4]                       = 20;
		$bd [72] [5]                       = 23;
		$bd [72] [6]                       = 25;
		$bd [72] [7]                       = 30;
		$bd [72] [8]                       = 21;
		$bd [72] [9]                       = 18;
		$bd [72] [10]                      = 21;
		$bd [72] [11]                      = 26;
		$bd [72] [12]                      = 27;
		$bd [72] [13]                      = 19;
		$bd [72] [14]                      = 31;
		$bd [72] [15]                      = 19;
		$bd [72] [16]                      = 29;
		$bd [72] [17]                      = 21;
		$bd [72] [18]                      = 25;
		$bd [72] [19]                      = 22;

		$bd [73] ["desc"] ["de"] ["long"]  = "Sirach";
		$bd [73] ["desc"] ["de"] ["short"] = "Sir";
		$bd [73] ["desc"] ["en"] ["long"]  = "Sir";
		$bd [73] ["desc"] ["en"] ["short"] = "Sir";
		$bd [73] ["pat"]                   = "/^(Jesus Sirach|Sirach|Ecclesiasticus|Sir)$/i";
		$bd [73] ["kapAnz"]                = 51;
		$bd [73] [1]                       = 30;
		$bd [73] [2]                       = 18;
		$bd [73] [3]                       = 31;
		$bd [73] [4]                       = 31;
		$bd [73] [5]                       = 15;
		$bd [73] [6]                       = 37;
		$bd [73] [7]                       = 36;
		$bd [73] [8]                       = 19;
		$bd [73] [9]                       = 18;
		$bd [73] [10]                      = 31;
		$bd [73] [11]                      = 34;
		$bd [73] [12]                      = 18;
		$bd [73] [13]                      = 26;
		$bd [73] [14]                      = 27;
		$bd [73] [15]                      = 20;
		$bd [73] [16]                      = 30;
		$bd [73] [17]                      = 32;
		$bd [73] [18]                      = 31;
		$bd [73] [19]                      = 30;
		$bd [73] [20]                      = 31;
		$bd [73] [21]                      = 28;
		$bd [73] [22]                      = 27;
		$bd [73] [23]                      = 27;
		$bd [73] [24]                      = 34;
		$bd [73] [25]                      = 26;
		$bd [73] [26]                      = 29;
		$bd [73] [27]                      = 30;
		$bd [73] [28]                      = 26;
		$bd [73] [29]                      = 28;
		$bd [73] [30]                      = 25;
		$bd [73] [31]                      = 28;
		$bd [73] [32]                      = 24;
		$bd [73] [33]                      = 33;
		$bd [73] [34]                      = 31;
		$bd [73] [35]                      = 26;
		$bd [73] [36]                      = 31;
		$bd [73] [37]                      = 31;
		$bd [73] [38]                      = 34;
		$bd [73] [39]                      = 35;
		$bd [73] [40]                      = 30;
		$bd [73] [41]                      = 22;
		$bd [73] [42]                      = 25;
		$bd [73] [43]                      = 33;
		$bd [73] [44]                      = 23;
		$bd [73] [45]                      = 23;
		$bd [73] [46]                      = 20;
		$bd [73] [47]                      = 25;
		$bd [73] [48]                      = 25;
		$bd [73] [49]                      = 16;
		$bd [73] [50]                      = 29;
		$bd [73] [51]                      = 30;

		$bd [74] ["desc"] ["de"] ["long"]  = "Gebet des Manasse";
		$bd [74] ["desc"] ["de"] ["short"] = "Gebet des Manasse";
		$bd [74] ["desc"] ["en"] ["long"]  = "PrMan";
		$bd [74] ["desc"] ["en"] ["short"] = "PrMan";
		$bd [74] ["pat"]                   = "/^(GebMan|PrManOrMan|Gebet (des )?Manasses?|PrMan|Man(asse)?)$/i";
		$bd [74] ["kapAnz"]                = 1;
		$bd [74] [1]                       = 16;

		$bd [75] ["desc"] ["de"] ["long"]  = "Psalmen Salomos";
		$bd [75] ["desc"] ["de"] ["short"] = "Psalmen Salomos";
		$bd [75] ["desc"] ["en"] ["long"]  = "Psalmen Salomos";
		$bd [75] ["desc"] ["en"] ["short"] = "Psalmen Salomos";
		$bd [75] ["pat"]                   = "/^(Psalmen Salomo[s]?|Ps\s?Sa[l]?)$/i";
		$bd [75] ["kapAnz"]                = 18;
		$bd [75] [1]                       = 8;
		$bd [75] [2]                       = 41;
		$bd [75] [3]                       = 16;
		$bd [75] [4]                       = 29;
		$bd [75] [5]                       = 21;
		$bd [75] [6]                       = 9;
		$bd [75] [7]                       = 9;
		$bd [75] [8]                       = 40;
		$bd [75] [9]                       = 19;
		$bd [75] [10]                      = 8;
		$bd [75] [11]                      = 9;
		$bd [75] [12]                      = 7;
		$bd [75] [13]                      = 11;
		$bd [75] [14]                      = 7;
		$bd [75] [15]                      = 15;
		$bd [75] [16]                      = 15;
		$bd [75] [17]                      = 51;
		$bd [75] [18]                      = 14;

		$bd [76] ["desc"] ["de"] ["long"]  = "Baruch";
		$bd [76] ["desc"] ["de"] ["short"] = "Baruch";
		$bd [76] ["desc"] ["en"] ["long"]  = "Bar";
		$bd [76] ["desc"] ["en"] ["short"] = "Bar";
		$bd [76] ["pat"]                   = "/^(Baruch|Bar)$/i";
		$bd [76] ["kapAnz"]                = 6;
		$bd [76] [1]                       = 22;
		$bd [76] [2]                       = 35;
		$bd [76] [3]                       = 38;
		$bd [76] [4]                       = 37;
		$bd [76] [5]                       = 9;
		$bd [76] [6]                       = 72;

		$bd [77] ["desc"] ["de"] ["long"]  = "Brief des Jeremia";
		$bd [77] ["desc"] ["de"] ["short"] = "Brief des Jeremia";
		$bd [77] ["desc"] ["en"] ["long"]  = "EpJer";
		$bd [77] ["desc"] ["en"] ["short"] = "EpJer";
		$bd [77] ["pat"]                   = "/^(Brief (des )?Jeremia[s]?|BrJe|BrJer|EpJer|Letter of Jeremiah)$/i";
		$bd [77] ["kapAnz"]                = 1;
		$bd [77] [1]                       = 73;
	}

	/**
	 * Helper function to compare two BibleVerseInterface objects with usort
	 *
	 * @param BibleVerseInterface $v1
	 * @param BibleVerseInterface $v2
	 * @return int
	 */
	public static function usortBibleverses(BibleVerseInterface $v1, BibleVerseInterface $v2) {
		$f1 = static::combine($v1->getFromBookId(), $v1->getFromChapter(), $v1->getFromVerse());
		$f2 = static::combine($v2->getFromBookId(), $v2->getFromChapter(), $v2->getFromVerse());


		// Use "to" attribute, if both verses have the same start
		if ($f1 == $f2) {
			$t1 = static::combine($v1->getToBookId(), $v1->getToChapter(), $v1->getToVerse());
			$t2 = static::combine($v2->getToBookId(), $v2->getToChapter(), $v2->getToVerse());

			return $t1 - $t2;
		}

		return $f1 - $f2;
	}

	/**
	 * Combine bookId, chapter and verse to one single Number
	 *
	 * @param int $bookId
	 * @param int $chapter
	 * @param int $verse
	 * @return int
	 */
	protected static function combine($bookId, $chapter, $verse) {
		return (int) sprintf('%03d%03d%03d', $bookId, $chapter, $verse);
	}

	/**
	 * Carefull !! The inserted Bibleverse-Objects will be used directly and merged.
	 * A reduced subset of merged bibleverses will be returned
	 *
	 * @param BibleVerseInterface[] $bibleverses
	 * @return BibleVerseInterface[]
	 * @throws InvalidBibleVerseObjectException
	 */
	public function mergeBibleverses($bibleverses) {
		$resultBibleverses = array();

		if (count($bibleverses) <= 0) {
			// Nothring to do
			return $bibleverses;
		}

		// Make shure all verses are of type BibleVerseInterface
		foreach ($bibleverses as $vers) {
			if (!$vers instanceof BibleVerseInterface) {
				throw new InvalidBibleVerseObjectException();
			}
		}

		// Sorty bibleverses by "from" attribute
		// compatibility with php 5.3 (no self::class)
		usort($bibleverses, array('StevenBuehner\BibleVerseBundle\Service\BibleVerseService', 'usortBibleverses'));

		// merge bibleverses if possible
		// Start loop with offset of one
		$former              = $bibleverses[0];
		$resultBibleverses[] = $former;

		for ($i = 1; $i < count($bibleverses); ++$i) {
			$current     = $bibleverses[$i];
			$currentFrom = static::combine($current->getFromBookId(), $current->getFromChapter(),
										   $current->getFromVerse());
			$formerTo    = static::combine($former->getToBookId(), $former->getToChapter(), $former->getToVerse());


			// Three cases to check (because the bibleverses are sorted!)
			// 1) $former TO is bigger or equals to $current FROM
			// 2) $former TO value is Differs from $current TO by one
			// 3) $former TO value is Differs from $current TO by one (check chapter start and endings)

			if ( /* 1) + 2) */
				($currentFrom - 1 <= $formerTo) ||
				/* 3) */
				($former->getToBookId() == $current->getFromBookId() &&
					$former->getToChapter() == $current->getFromChapter() - 1 &&
					$current->getFromVerse() == 1 &&
					$former->getToVerse() == $this->getMaxVersOfBookKap($former->getToBookId(),
																		$former->getToChapter()))
			) {
				// do Merge
				$former->setToBookId($current->getFromBookId());

				// Set the taller Number (i.e. when the $current verse is a smaller part of the $formerVerse
				$currentTo = static::combine($current->getToBookId(), $current->getToChapter(), $current->getToVerse());
				if ($currentTo > $formerTo) {
					$former->setToChapter($current->getToChapter());
					$former->setToVerse($current->getToVerse());
				} else {
					// $former->setToChapter($former->getToChapter());
					// $former->setToVerse($former->getToVerse());
				}

			} else {
				$former              = $current;
				$resultBibleverses[] = $current;
			}
		}

		return $resultBibleverses;
	}

	/**
	 * Return the number of verses a chapter of a $bookID has or zero, if the bibleBookID or the chapter in that book
	 * don't exist
	 *
	 * @param int $bookID
	 * @param int $kap
	 * @return number
	 */
	public function getMaxVersOfBookKap($bookID, $kap) {
		if (isset ($this->bibleData [$bookID]) && isset ($this->bibleData [$bookID] [$kap])) {
			return ( int ) $this->bibleData [$bookID] [$kap];
		} else {
			return 0;
		}
	}

	/**
	 * Finds bibleverses in the given string and returns an ARRAY of BIBLEVERSEs
	 *
	 * @param string $bibleString
	 * @return BibleVerseInterface[]
	 * @throws InvalidBookIdException
	 */
	public function stringToBibleVerse($bibleString) {
		$this->statStart();
		$bibleVerses  = array();
		$bvKeyZaehler = -1;
		$secondSearch = '~(?<buch>[1-5]?[.]?\s?[a-zA-Z][a-zA-Zäöü̈ ]+)[.]?\s*(?<kapVon>[0-9]{1,3})((?<trenner>:|,\s*)(?<versVon>[0-9]{1,3}))?(?<rest>((\s*[+\.,:;\-]\s*)[0-9]{1,3}|f)+)?~i';

		// Remove long strokes from U+2010 to U+2015
		$bibleString = preg_replace('~(‐|‑|‒|–|—|―)~u', '-', $bibleString);

		// First identify ALL Bibleverses in a text
		preg_match_all($this->getFirstSearchString(), $bibleString, $matches1, PREG_SET_ORDER);

		// Safe everything that was no bibleverse to $this->lastRestString
		$this->lastRestString = $bibleString;
		foreach ($matches1 as $key => $val1) {
			$this->lastRestString = preg_replace("~{$val1[0]}~", '', $this->lastRestString, 1);
		}

		foreach ($matches1 as $key => $val1) {
			// Than splice the each found biblevers into its segments (book, kap, vers)
			preg_match($secondSearch, $val1 [0], $value);

			$book    = trim($value ['buch']);
			$kapVon  = ( int ) $value ['kapVon'];
			$versVon = (!empty ($value ['versVon'])) ? (int) trim($value ['versVon']) : NULL;
			$rest    = (!empty ($value ['rest'])) ? trim($value ['rest']) : '';
			$trenner = isset($value['trenner']) ? trim($value['trenner']) : '';
			$lang    = $this->getLanguageFromChapterVerseSeparator($trenner);

			try {
				$bookID = $this->getBookIdFromString($book);
			} catch (\Exception $e) {
				continue;
			}

			/*
			 * This flag specifies, if the "$rest" string is supposed to be interpreted as verses or as chapters.
			 * This flag might me changed in the following iterating, because the rest always depends on the former Bibleverse.
			 * I.e. in "Gen 3,4-5" the rest "-5" is ment to be a VERSE => $isChapterRange=false
			 * I.e. in "Gen 3-4" the rest "-4" is ment to be a Chapter => $isChapterRange=true
			 * I.e. in "Gen 3,4-6.8-9 the rest "-6", ".8-9" are all ment to be a Verse => $isChapterRange=true
			 */
			$isChapterRange = NULL;

			$bvKeyZaehler++;
			$bibleVerses [$bvKeyZaehler] = new BibleVerse ();
			$bibleVerses [$bvKeyZaehler]->setBookId($bookID);
			$bibleVerses [$bvKeyZaehler]->setFromChapter($kapVon);
			$bibleVerses [$bvKeyZaehler]->setToChapter($kapVon);
			if (!empty($versVon)) {
				$bibleVerses [$bvKeyZaehler]->setFromVerse($versVon);
				$bibleVerses [$bvKeyZaehler]->setToVerse($versVon);
				$isChapterRange = FALSE;
			} else if (empty($versVon)) {
				if (strlen($rest) == 0) {
					// Only Chapter (i.e. Gen 1)
					// The verse is done after this
					$bibleVerses [$bvKeyZaehler]->setFromVerse(1);
					$bibleVerses [$bvKeyZaehler]->setToVerse($this->getMaxVersOfBookKap($bookID, $kapVon));
				} else {
					// There is more coming ... following $rest will contain information about Verse-Stuff
					$bibleVerses [$bvKeyZaehler]->setFromVerse(1);
					$bibleVerses [$bvKeyZaehler]->setToVerse(NULL);
				}
				$isChapterRange = TRUE;
			}


			$backupCounter = 0;
			while (strlen($rest) > 0 && $backupCounter++ < 30) {

				switch (substr($rest, 0, 1)) {
					case "+" :
					case "." :
						if (preg_match("/(([0-9]{1,3})([,:\-]\s?))?([1-9][0-9]{0,2})([0-9.+f,:\-\s]*)/",
									   substr($rest, 1),
									   $value)) {
							// Recognizes the values 4,9 or 4:9 or 4-9 or 9 or 4,9f or 4:9f

							$zahl1 = (!empty ($value [2])) ? ( int ) $value [2] : NULL;
							$zahl2 = ( int ) $value [4];
							$delim = $value [3];
							$rest  = trim($value [5]);

							// only create a new BibleVerse, if verses or chapters don't follow after each other
							/** @var $formerBv BibleVerse */
							$formerBv = &$bibleVerses [$bvKeyZaehler];

							// Create the next Bibleverse as a copy of the old one:
							// We start of with a copy of the former Bibleverse and change what needs to be changed,
							// because this bibleverse depents on the former one (Like BookId)
							$bvKeyZaehler++;
							$bibleVerses [$bvKeyZaehler] = $this->copyBibleVerse($formerBv);

							if ($isChapterRange === TRUE) {
								// The former Bibleverse did only contain chapter information (i.e. Gen 1)
								// Mark former Bibleverse as finsihed ...
								$formerBv->setFromVerse(1);
								$formerBv->setToVerse($this->getMaxVersOfBookKap($formerBv->getBookId(),
																				 $formerBv->getToChapter()));


								/* =>
								The "rest" handled here, will point to a new bibleverse that is either only a chapter (Gen 1+3 -> "+3")
								Or the "rest" handled here will point to a new chapter,verse combination (Gen 1+3,4 -> "+3,4")
								So the chapter can't be taken from the former Bibleverse.
								*/

								// from here on we handle a totaly new Bibleverse (the next one)
								if ($delim == ',' || $delim == ':') {
									// "+3,4", ".3,4"
									$bibleVerses [$bvKeyZaehler]->setFromChapter($zahl1);
									$bibleVerses [$bvKeyZaehler]->setToChapter($zahl1);

									$bibleVerses [$bvKeyZaehler]->setFromVerse($zahl2);
									$bibleVerses [$bvKeyZaehler]->setToVerse($zahl2);

									$isChapterRange = FALSE;
								} else if ($delim == '-') {
									// "+3-4", ".3-4"
									$bibleVerses [$bvKeyZaehler]->setFromChapter($zahl1);
									$bibleVerses [$bvKeyZaehler]->setToChapter($zahl2);

									$bibleVerses [$bvKeyZaehler]->setFromVerse(1);
									$bibleVerses [$bvKeyZaehler]->setToVerse($this->getMaxVersOfBookKap($bibleVerses [$bvKeyZaehler]->getBookId(),
																										$zahl2));

									$isChapterRange = TRUE;
								} else {
									// No Delimiter ("+4", ".4")
									$bibleVerses [$bvKeyZaehler]->setFromChapter($zahl2);
									$bibleVerses [$bvKeyZaehler]->setToChapter($zahl2);

									$bibleVerses [$bvKeyZaehler]->setFromVerse(1);
									$bibleVerses [$bvKeyZaehler]->setToVerse($this->getMaxVersOfBookKap($bibleVerses [$bvKeyZaehler]->getBookId(),
																										$zahl2));
								}

							} else {
								/*
								 * The formerBibleverse contained information about a verse.
								 * This means, that the following information could just be a follow up verse of the same chapter
								 * or it could also mean, that the following information is a totally new chapter + verse
								 */
								$isChapterRange = FALSE;

								// from here on we handle a totaly new Bibleverse (the next one)
								if ($delim == ',' || $delim == ':') {
									// "+3,4", ".3,4"
									$bibleVerses [$bvKeyZaehler]->setFromChapter($zahl1);
									$bibleVerses [$bvKeyZaehler]->setToChapter($zahl1);

									$bibleVerses [$bvKeyZaehler]->setFromVerse($zahl2);
									$bibleVerses [$bvKeyZaehler]->setToVerse($zahl2);
								} else if ($delim == '-') {
									// "+3-4", ".3-4"
									$bibleVerses [$bvKeyZaehler]->setFromVerse($zahl1);
									$bibleVerses [$bvKeyZaehler]->setToVerse($zahl2);
								} else {
									// No Delimiter ("+4", ".4")
									$bibleVerses [$bvKeyZaehler]->setFromVerse($zahl2);
									$bibleVerses [$bvKeyZaehler]->setToVerse($zahl2);
								}
							}
						}

						break;
					case "f" :
						$bookID = $bibleVerses [$bvKeyZaehler]->getBookId();
						$kFrom  = $bibleVerses [$bvKeyZaehler]->getFromChapter();
						// $vFrom  = $bibleVerses [$bvKeyZaehler]->getFromVerse();
						$kTo = $bibleVerses [$bvKeyZaehler]->getToChapter();
						$vTo = $bibleVerses [$bvKeyZaehler]->getToVerse();

						// Prüfen ob es sogar ein "ff" ist
						if (strlen($rest) > 1 && substr($rest, 1, 1) == "f") {
							// Es handelt sich um ein "ff" ... demnach also alle Verse bis zum Ende des Kapitels

							if ($this->bibleData [$bookID] ["kapAnz"] >= $kTo && isset ($this->bibleData [$bookID] [$kTo]) && $this->bibleData [$bookID] [$kTo] >= $vTo) {
								// Bis zum Endes des Kapitels
								$bibleVerses [$bvKeyZaehler]->setToVerse($this->bibleData [$bookID] [$kTo]);
								$rest = substr($rest, 2);
							}

							if ($isChapterRange === TRUE) {
								// Only happens if the user used invalid statements like "Gen 1ff" instead of "Gen 1,1ff"
								$bibleVerses [$bvKeyZaehler]->setFromVerse(1);
							}

						} else {
							// Es handelt sich um ein einfaches "f"
							// Beim letzten Kap/Vers-Bereich den BisVers um eins erhöhen
							// Aktuelle (erste) Bibelstelle mit KapitelTO und VersTO erweitern.


							if ($isChapterRange === TRUE) {
								/*
								 * The 'f' belongs to a chapterselection (i.e. "Gen 3f)
								 */

								// First Check, if that chapter exists
								if ($this->getMaxKapOfBook($bookID) >= ($kFrom + 1)) {
									$bibleVerses [$bvKeyZaehler]->setToChapter($kFrom + 1);
									$bibleVerses [$bvKeyZaehler]->setFromVerse(1);
									$bibleVerses [$bvKeyZaehler]->setToVerse($this->getMaxVersOfBookKap($bookID,
																										$bibleVerses [$bvKeyZaehler]->getToChapter()));
								}
							} else {
								/*
								* The 'f' belongs to a verseselection (i.e. "Gen 3,4f)
								*/

								// Sicherstellen, dass es überhaupt noch einen zusätzlichen Vers in dem Kapitel gibt
								if ($this->bibleData [$bookID] ["kapAnz"] >= $kTo && isset ($this->bibleData [$bookID] [$kTo]) && $this->bibleData [$bookID] [$kTo] >= $vTo + 1) {
									$bibleVerses [$bvKeyZaehler]->setToVerse($vTo + 1);
								}
							}

							$rest = substr($rest, 1);
						}
						break;
					case "-" :

						/*
							This is needed to distinguish between
							Genesis 39:16-17,19
							and
							Genesis 39,16-40,20
						*/
						$trenner = $this->getChapterVerseSeperatorsByLanguage($lang);
						$rest    = substr($rest, 1);

						// Beginn eines Kap/Vers-Bereichs
						// Aktuelle (erste) Bibelstelle mit KapitelTO und VersTO erweitern.
						if (preg_match('~^(?<chapter>[1-9][0-9]{0,2})([' . $trenner . '])(?<verse>[1-9][0-9]{0,2})(?<rest>[0-9.+f,:\-\s]*)~',
									   $rest, $value)) {
							// Normale Kapitel + Versangabe
							// Bsp.: Gen 3,5-4,6

							$chapter = ( int ) $value ['chapter'];
							$verse   = ( int ) $value ['verse'];
							$rest    = trim($value ['rest']);

							$bibleVerses[$bvKeyZaehler]->setToChapter($chapter);
							$bibleVerses[$bvKeyZaehler]->setToVerse($verse);

						} else if (preg_match('~(?<chapterOrVerse>[1-9][0-9]{0,2})(?<rest>[0-9.+f,:\-\s]*)~',
											  $rest, $value)) {
							// Bsp.: Gen 3-4				=> nach MINUS als Kapitel behandeln
							// Bsp.: Gen 3,5-4				=> nach MINUS als Vers behandeln
							// Bsp.: Gen 3:5-4,3 (bei engl) => nach MINUS als Vers behandeln + Rest: ',3' als weiteren Vers später

							$chapterOrVerse = ( int ) $value ['chapterOrVerse'];
							$rest           = trim($value ['rest']);

							if ($bibleVerses[$bvKeyZaehler]->getToVerse() == NULL) {
								// Bei nur Kapitel-Eingabe
								// Bsp.: 1. Mose 1-3

								$bookId  = $bibleVerses[$bvKeyZaehler]->getBookId();
								$chapter = $chapterOrVerse;

								$bibleVerses[$bvKeyZaehler]->setToChapter($chapter);
								$bibleVerses[$bvKeyZaehler]->setToVerse($this->getMaxVersOfBookKap($bookId, $chapter));
								// $bibleVerses[$bvKeyZaehler]->setFromVerse(1);
								$isChapterRange = TRUE;
							} else {
								$verse = $chapterOrVerse;
								// $fromChapter = $bibleVerses[$bvKeyZaehler]->getFromChapter();
								// $bibleVerses[$bvKeyZaehler]->setToChapter($fromChapter);
								$bibleVerses[$bvKeyZaehler]->setToVerse($verse);
							}
						}

						break;
					case ',':
						// This happens when
						// a) chapter and verse-selections are mixed in a rest-string (i.e. Gen 3-4+5-6,7 -> the rest here would be ",7", because the former was working on "+5-6")
						// b) multiple english written bibleverses are listed (i.e. Genesis 26:35, 27:46)
						// c) multiple verses added (like accordance does allow): Genesis 26:35, 38

						// Cut off the ","
						$rest                  = substr($rest, 1);
						$chapterVerseSeparator = $this->getChapterVerseSeperatorsByLanguage($lang);

						if (preg_match('~^\s?(?<kapVon>[0-9]{1,3})[' . $chapterVerseSeparator . '](?<versVon>[0-9]{1,3})(?<rest>[0-9.+f,:\-\s]*)~',
									   $rest, $value)) {

							$chapter = ( int ) $value ['kapVon'];
							$verse   = (int) trim($value ['versVon']);
							$rest    = trim($value ['rest']);

							$bv = new BibleVerse();
							$bv->setBookId($bibleVerses[$bvKeyZaehler]->getBookId());
							$bv->setFromChapter($chapter);
							$bv->setFromVerse($verse);
							$bv->setToChapter($chapter);
							$bv->setToVerse($verse);
							$bibleVerses[++$bvKeyZaehler] = $bv;
						}// case c): If ",<SPACE><NUMBER>" => Number represents another verse preceding the former one
						else if (preg_match('~^\s?(?<versVon>[0-9]{1,3})(?<rest>[0-9.+f,:\-\s]*)~',
											$rest, $value)) {

							$verse = (int) trim($value ['versVon']);
							$rest  = trim($value ['rest']);

							if ($isChapterRange === TRUE) {
								// Bsp.: Jesus Sirach 16-17+19-20+30-32,5
								$bibleVerses[$bvKeyZaehler]->setToVerse($verse);
								$isChapterRange = FALSE;
							} else {
								$bv = $this->copyBibleVerse($bibleVerses[$bvKeyZaehler]);
								$bv->setFromVerse($verse);
								$bv->setToVerse($verse);
								$bibleVerses[++$bvKeyZaehler] = $bv;
							}
						}

						break;

					case ';':

						$rest   = trim(substr($rest, 1));
						$bookID = $bibleVerses [$bvKeyZaehler]->getBookId();

						if (preg_match('~^(?<chapter>[1-9][0-9]{0,2})((?<trenner>,\s?|:)(?<last>[1-9][0-9]{0,2}))?(?<rest>.*)$~',
									   $rest, $value) === 1) {

							$chapterOrVerse = ( int ) $value ['chapter'];
							$bv             = new BibleVerse();
							$bv->setBookId($bookID);
							$bv->setFromChapter($chapterOrVerse);
							$bv->setToChapter($chapterOrVerse);


							if (!empty($value['last']) && $isChapterRange === FALSE) {
								// Bsp.: Gen 3,4; 5,5	| 	Rest: 5,5...		=> zwei einzelne Verse
								// Bsp.: Gen 3,4; 5,5-6	| 	Rest: 5,5...		=> Zwei Verse zu verschiedenen Kapitel. Neuer Rest: "-6"

								$verse = (int) $value ['last'];
								$bv->setFromVerse($verse);
								$bv->setToVerse($verse);

							} else if ($isChapterRange === TRUE && empty($value['last'])) {
								// Bsp.: Gen 4; 5		| 	Rest: 5...			=> zwei ganze Kapitel

								$bv->setFromVerse(1);
								$bv->setToVerse($this->getMaxVersOfBookKap($bookID, $chapterOrVerse));

								// Den letzten Vers nachbearbeiten, falls noch nicht geschehen
								$bibleVerses[$bvKeyZaehler]->setFromVerse(1);
								$bibleVerses[$bvKeyZaehler]->setToVerse($this->getMaxVersOfBookKap($bookID,
																								   $bibleVerses[$bvKeyZaehler]->getToChapter()));

							} else if ($isChapterRange === FALSE && empty($value['last'])) {
								// Bsp.: Gen 3,4; 5-6	| 	Rest: 5...			=> Zwei Verse zum selben Kapitel 3. Neuer Rest -6

								$kTo = $bibleVerses [$bvKeyZaehler]->getToChapter();
								$bv->setFromChapter($kTo);
								$bv->setToChapter($kTo);
								$bv->setFromVerse($chapterOrVerse);
								$bv->setToVerse($chapterOrVerse); // Temporaryly
							} else {

								// This should not happen
								break; // In Switch ab PHP 7.3 nur noch breaks

							}

							$rest                         = trim($value ['rest']);
							$bibleVerses[++$bvKeyZaehler] = $bv;

						} else {
							$code = preg_last_error();
						}

						break;

					default :
						// Das darf nicht sein -> weitere Suche / While-Schleife abbrechen
						break 2;
				} // END SWITCH
			} // END WHILE
		}

		// Ungültige Bibelstellen aus der Auflistung entfernen
		$this->lastInvalidBibleverses = array();
		if ($bibleVerses !== NULL) {
			foreach ($bibleVerses as $key => $vers) {
				if (!$this->isBibleVerseValid($vers)) {
					$this->lastInvalidBibleverses [] = $vers;

					unset ($bibleVerses [$key]);
				}
			}
		}

		$this->statStop();

		return $bibleVerses;
	}

	private function statStart() {
		$this->startTime = microtime(TRUE);
	}

	/**
	 * Generate the FirstSearchString out of the single Books to identify the book of a bible
	 *
	 * @return string
	 */
	public function getFirstSearchString() {
		if ($this->firstSearchString == NULL) {
			$d   = $this->getBibleData();
			$ges = "";

			foreach ($d as $bookID => $book) {
				$ges .= "(" . $this->cleanUpForUltima($book ["pat"]) . ")|";
			}

			// (?<![a-zA-Z0-9]) -> negative lookbehind (is not allowed to start directly with a letter or number)
			// Valid Rest-Strings are 'f', 'ff', '.2', '+3'   ', 3'   ', 3:5'
			$ges     = substr($ges, 0, strlen($ges) - 1);
			$trenner = '(:|,\s?)';

			$this->firstSearchString = '~(?<![a-zA-Z])(' . $ges . ')[.]?\s?([0-9]{1,3})(' . $trenner . '([0-9]{1,3}))?\s*((([+\.,:][0-9]{1,3}|-\s?[0-9]{1,3}|[,;]\s*[0-9]{1,3}[,:]\s?[0-9]{1,3}|[,;]\s*[0-9]{1,3}(?![,:\.a-z\s]+))(?![0-9])|f)+)?~i';
		}

		return $this->firstSearchString;
	}

	/**
	 * Only for debugging usage
	 */
	public function getBibleData() {
		return $this->bibleData;
	}

	public function cleanUpForUltima($string) {
		$len    = strlen($string);
		$string = substr($string, 1, $len - 2);

		// vorne kürzen
		while (strlen($string) > 0 && (substr($string, 0, 1) == "/" || substr($string, 0, 1) == "^")) {
			$string = substr($string, 1);
		}

		// Hinten kürzen
		$len = strlen($string);
		while ($len > 0 && (substr($string, $len - 1, 1) == "/" || substr($string, $len - 1, 1) == "$")) {
			$string = substr($string, 0, $len - 1);
			$len    = strlen($string);
		}

		// Eingeklammert diese löschen
		while ($len > 0 && substr($string, 0, 1) == "(" && substr($string, $len - 1, 1) == ")") {
			$string = substr($string, 1, $len - 2);
			$len    = strlen($string);
		}

		return $string;
	}

	/**
	 * @param string $trenner
	 * @return string (de|en|unk)
	 */
	protected function getLanguageFromChapterVerseSeparator($trenner) {
		switch ($trenner) {
			case ',':
				return 'de';
			case  ':':
				return 'en';
			default:
				return 'unk';
		}
	}

	public function getBookIdFromString($bookString) {
		$bookString = trim($bookString);
		foreach ($this->bibleData as $key => $value) {
			if (!empty ($value ["pat"]) && preg_match($value ["pat"], $bookString)) {
				return ( int ) $key;
			}
		}

		throw new \Exception ("No BookID found for this particular BookString='$bookString'");
	}

	/**
	 * Copy a existant bibleverse
	 *
	 * @param BibleVerse $bv
	 * @return BibleVerse
	 * @throws \StevenBuehner\BibleVerseBundle\Exceptions\InvalidBookIdException
	 */
	protected function copyBibleVerse(BibleVerse $bv) {
		$c = new BibleVerse();
		$c->setBookId($bv->getBookId());
		$c->setFromChapter($bv->getFromChapter());
		$c->setToChapter($bv->getToChapter());
		$c->setFromVerse($bv->getFromVerse());
		$c->setToVerse($bv->getToVerse());

		return $c;
	}

	/**
	 * Return the number of chapters a bibleBookID has or zero, if the bibleBookID doesn't exist
	 *
	 * @param int $bookID
	 * @return number
	 */
	public function getMaxKapOfBook($bookID) {
		if (isset ($this->bibleData [$bookID]) && isset ($this->bibleData [$bookID] ["kapAnz"])) {
			return ( int ) $this->bibleData [$bookID] ["kapAnz"];
		} else {
			return 0;
		}
	}

	protected function getChapterVerseSeperatorsByLanguage($lang) {
		switch ($lang) {
			case 'de':
				return ',';
			case 'en':
				return ':';
			default:
				return ':,';
		}
	}

	// Init Funktionen

	/**
	 * Returns true if the given Data in BibleVerse $bv matches some validation-criterias
	 *
	 * @param BibleVerseInterface $bv
	 * @return Boolean
	 */
	public function isBibleVerseValid(BibleVerseInterface $bv) {
		// Auf NULL prüfen
		if ($bv == NULL) {
			return FALSE;
		}

		// Prüfen ob die BookID im Datenblock existiert
		// Check if BookId exists
		$id = $bv->getFromBookId();

		if (!isset ($this->bibleData [$id])) {
			return FALSE;
		}

		// Check if chapters exist
		$k1   = $bv->getFromChapter();
		$k2   = $bv->getToChapter();
		$kMax = $this->bibleData [$id] ["kapAnz"];

		if ($k1 < 0 || $k2 < 0 || $k2 < $k1 || $k1 > $kMax || $k2 > $kMax) {
			return FALSE;
		}

		// Check if Verse-area exists
		$v1 = $bv->getFromVerse();
		$v2 = $bv->getToVerse();

		if ($k1 == $k2 && $v2 < $v1) {
			return FALSE;
		}

		// Wenn Informationen zum Start-Vers vorhanden, diese ebenfalls validieren
		if (isset ($this->bibleData [$id] [$k1]) && $v1 > $this->bibleData [$id] [$k1]) {
			return FALSE;
		}

		// Wenn Informationen zum End-Vers vorhanden, diese ebenfalls validieren
		if (isset ($this->bibleData [$id] [$k2]) && $v2 > $this->bibleData [$id] [$k2]) {
			return FALSE;
		}

		// Wenn Kapitel 0 sind, dürfen keine Verse gesetzt sein - macht keinen Sinn
		if (($k1 == 0 && $v1 != 0) || ($k2 == 0 && $v2 != 0)) {
			return FALSE;
		}

		return TRUE;
	}

	private function statStop() {
		$now = microtime(TRUE);

		if ($this->startTime > 0) {
			$dif = $now - $this->startTime;

			$this->statLongest  = ($dif > $this->statLongest) ? $dif : $this->statLongest;
			$this->statShortest = ($dif < $this->statShortest) ? $dif : $this->statShortest;
			$this->statCount++;
			$this->statSum += $dif;
		}
	}

	/**
	 * @param BibleVerseInterface $bibleVerse
	 * @throws InvalidBibleVerseRangeException
	 */
	public function autoCorrectBibleverse(BibleVerseInterface $bibleVerse) {

		// Prüfen ob die BookID im Datenblock existiert
		// Check if BookId exists
		$id = $bibleVerse->getFromBookId();

		if (!isset ($this->bibleData [$id])) {
			throw new InvalidBibleVerseRangeException();
		}

		// Check if chapters exist
		$k1   = $bibleVerse->getFromChapter();
		$k2   = $bibleVerse->getToChapter();
		$kMax = $this->bibleData [$id] ["kapAnz"];

		// Chapters must exist
		if ($k1 < 0 || $k2 < 0 || $k2 < $k1 || $k1 > $kMax || $k2 > $kMax) {
			throw new InvalidBibleVerseRangeException();
		}

		// Correct the verses
		// Check if Verse-area exists
		$v1 = $bibleVerse->getFromVerse();
		$v2 = $bibleVerse->getToVerse();

		if ($k1 == $k2 && $v2 < $v1) {
			$bibleVerse->setFromVerse($v2);
			$bibleVerse->setToVerse($v1);
			$v1 = $bibleVerse->getFromVerse();
			$v2 = $bibleVerse->getToVerse();
		}

		// Wenn Informationen zum Start-Vers vorhanden, diese ebenfalls validieren
		if (isset ($this->bibleData [$id] [$k1]) && $v1 > $this->getMaxVersOfBookKap($id, $k1)) {
			$bibleVerse->setFromVerse($this->getMaxVersOfBookKap($id, $k1));
			// $v1 = $bibleVerse->getFromVerse();
		}

		// Wenn Informationen zum End-Vers vorhanden, diese ebenfalls validieren
		if (isset ($this->bibleData [$id] [$k2]) && $v2 > $this->getMaxVersOfBookKap($id, $k2)) {
			$bibleVerse->setToVerse($this->getMaxVersOfBookKap($id, $k2));
			// $v2 = $bibleVerse->getToVerse();
		}

		return $bibleVerse;

	}

	/**
	 * Returns a String with the Default-Name of the given BibleBook and chapter/verse range
	 *
	 * @param BibleVerseInterface $bibleVerse
	 * @param string              $length ("short"|"long")
	 * @param string              $lang ("de"|"en")
	 * @return string
	 * @throws InvalidBibleVerseRangeException
	 */
	public function bibleVerseToString(BibleVerseInterface $bibleVerse, $length = "long", $lang = "de") {
		if ($bibleVerse !== NULL && isset ($this->bibleData [$bibleVerse->getFromBookId()]) && $this->isBibleVerseValid($bibleVerse)) {
			$bv = $bibleVerse;

			switch (strtolower($lang)) {
				case "de" :
					$kapVersDelim = ",";
					break;
				case "en" :
					$kapVersDelim = ":";
					break;
				default :
					$kapVersDelim = ",";
					$lang         = "de";
			}

			// Get the fitting name of the book
			switch ($length) {
				case "short" :
					$book = $this->bibleData [$bibleVerse->getFromBookId()] ["desc"] [$lang] ["short"];
					break;
				case "long" :
				default :
					$book = $this->bibleData [$bibleVerse->getFromBookId()] ["desc"] [$lang] ["long"];
					break;
			}

			// build the string out of four possibilities:
			// Gal 5 5 0 5 0
			// Gal 5,6 5 6 5 6
			// Gal 5,6-7 5 6 5 7
			// Gal 5,6-7,8 5 6 7 8

			if ($bv->getFromChapter() == $bv->getToChapter()) {
				// Chapters are the same
				if ($this->isBibleVerseAWholeChapter($bv)) {
					// Bibleverse cointains only whole chapters
					// i.e. Gen 3
					$returnVal = $book . ' ' . $bv->getFromChapter();
				} else if ($bv->getFromVerse() == $bv->getToVerse()) {
					// print chapter with one verse
					$returnVal = $book . " " . $bv->getFromChapter() . $kapVersDelim . $bv->getFromVerse();
				} else {
					$returnVal = $book . " " . $bv->getFromChapter() . $kapVersDelim . $bv->getFromVerse() . "-" . $bv->getToVerse();
				}
			} else {
				// Chapters are different
				if ($this->isBibleVerseAWholeChapter($bv)) {
					// Bibleverse cointains only whole chapters
					$returnVal = $book . ' ' . $bv->getFromChapter() . '-' . $bv->getToChapter();
				} else {
					$returnVal = $book . ' ' . $bv->getFromChapter() . $kapVersDelim . $bv->getFromVerse() . "-" . $bv->getToChapter() . $kapVersDelim . $bv->getToVerse();
				}
			}

			return $returnVal;
		}
		throw new InvalidBibleVerseRangeException ("The given Biblevers is not valid: " . $bibleVerse->__toString());
	}

	/**
	 * Return true, if the given BibleVerse contains only whole chapters (i.e. Gen 3 or Gen 3-5)
	 *
	 * @param BibleVerseInterface $bv
	 * @return bool
	 */
	public function isBibleVerseAWholeChapter(BibleVerseInterface $bv) {
		$maxVerseToChapter = $this->getMaxVersOfBookKap($bv->getFromBookId(), $bv->getToChapter());

		return ($bv->getFromVerse() == 1 && $bv->getToVerse() == $maxVerseToChapter);
	}

	/**
	 * Returns descriptive Name of the book id or '' if nothing was found
	 *
	 * @param int    $bookId
	 * @param string $length ('long', 'short')
	 * @param string $lang ('de', 'en')
	 * @return string
	 */
	public function getBookStringFromId($bookId, $length = 'long', $lang = 'de') {
		if (isset($this->bibleData[$bookId]) &&
			isset($this->bibleData[$bookId]['desc']) &&
			isset($this->bibleData[$bookId]['desc'][$lang]) &&
			isset($this->bibleData[$bookId]['desc'][$lang][$length])
		) {
			return $this->bibleData[$bookId]['desc'][$lang][$length];
		}

		return '';
	}

	/**
	 * Returns the last validationErrors of the recent stringToBibletag-function.
	 *
	 * @return BibleVerseInterface[] $lastInvalidBibleverses
	 */
	public function getLastValidationErrors() {
		return $this->lastInvalidBibleverses;
	}

	/**
	 * Returns everything of the last stringToBibleVerse call, that was no bibleverse
	 *
	 * @return string
	 */
	public function getLastRestString() {
		return $this->lastRestString;
	}

	public function getStat() {
		$ret = "(Longest: {$this->statLongest})<br/>(Shortest: {$this->statShortest})<br/>(Count: {$this->statCount})<br/>(Average: ";

		if ($this->statCount != 0) {
			$ret .= ($this->statSum / $this->statCount);
		} else {
			$ret .= "0";
		}
		$ret .= ")";

		return $ret;
	}

}

?>